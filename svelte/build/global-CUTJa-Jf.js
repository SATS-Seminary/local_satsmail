var Sn=Object.defineProperty;var Ln=(e,n,t)=>n in e?Sn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var Te=(e,n,t)=>Ln(e,typeof n!="symbol"?n+"":n,t);function U(){}const De=e=>e;function Mn(e,n){for(const t in n)e[t]=n[t];return e}function dn(e){return e()}function ze(){return Object.create(null)}function G(e){e.forEach(dn)}function q(e){return typeof e=="function"}function yt(e,n){return e!=e?n==n:e!==n||e&&typeof e=="object"||typeof e=="function"}let we;function vt(e,n){return e===n?!0:(we||(we=document.createElement("a")),we.href=n,e===we.href)}function ee(e,n){return e!=e?n==n:e!==n}function En(e){return Object.keys(e).length===0}function pt(e,...n){if(e==null){for(const l of n)l(void 0);return U}const t=e.subscribe(...n);return t.unsubscribe?()=>t.unsubscribe():t}function hn(e,n,t,l){if(e){const i=gn(e,n,t,l);return e[0](i)}}function gn(e,n,t,l){return e[1]&&l?Mn(t.ctx.slice(),e[1](l(n))):t.ctx}function _n(e,n,t,l){if(e[2]&&l){const i=e[2](l(t));if(n.dirty===void 0)return i;if(typeof i=="object"){const o=[],s=Math.max(n.dirty.length,i.length);for(let a=0;a<s;a+=1)o[a]=n.dirty[a]|i[a];return o}return n.dirty|i}return n.dirty}function bn(e,n,t,l,i,o){if(i){const s=gn(n,t,l,o);e.p(s,i)}}function kn(e){if(e.ctx.length>32){const n=[],t=e.ctx.length/32;for(let l=0;l<t;l++)n[l]=-1;return n}return-1}function fe(e){return e&&q(e.destroy)?e.destroy:U}function It(e){const n=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return n?[parseFloat(n[1]),n[2]||"px"]:[e,"px"]}const wn=typeof window<"u";let Re=wn?()=>window.performance.now():()=>Date.now(),Fe=wn?e=>requestAnimationFrame(e):U;const re=new Set;function Cn(e){re.forEach(n=>{n.c(e)||(re.delete(n),n.f())}),re.size!==0&&Fe(Cn)}function Oe(e){let n;return re.size===0&&Fe(Cn),{promise:new Promise(t=>{re.add(n={c:e,f:t})}),abort(){re.delete(n)}}}function L(e,n){e.appendChild(n)}function yn(e){if(!e)return document;const n=e.getRootNode?e.getRootNode():e.ownerDocument;return n&&n.host?n:e.ownerDocument}function Nn(e){const n=E("style");return n.textContent="/* empty */",An(yn(e),n),n.sheet}function An(e,n){return L(e.head||e,n),n.sheet}function F(e,n,t){e.insertBefore(n,t||null)}function D(e){e.parentNode&&e.parentNode.removeChild(e)}function Pt(e,n){for(let t=0;t<e.length;t+=1)e[t]&&e[t].d(n)}function E(e){return document.createElement(e)}function Y(e){return document.createTextNode(e)}function O(){return Y(" ")}function Me(){return Y("")}function V(e,n,t,l){return e.addEventListener(n,t,l),()=>e.removeEventListener(n,t,l)}function Tt(e){return function(n){return n.preventDefault(),e.call(this,n)}}function St(e){return function(n){return n.stopPropagation(),e.call(this,n)}}function b(e,n,t){t==null?e.removeAttribute(n):e.getAttribute(n)!==t&&e.setAttribute(n,t)}function Bn(e){return Array.from(e.childNodes)}function x(e,n){n=""+n,e.data!==n&&(e.data=n)}function Ke(e,n){e.value=n??""}function Lt(e,n,t,l){t==null?e.style.removeProperty(n):e.style.setProperty(n,t,"")}function Mt(e,n,t){for(let l=0;l<e.options.length;l+=1){const i=e.options[l];if(i.__value===n){i.selected=!0;return}}(!t||n!==void 0)&&(e.selectedIndex=-1)}function Et(e){const n=e.querySelector(":checked");return n&&n.__value}function A(e,n,t){e.classList.toggle(n,!!t)}function Dn(e,n,{bubbles:t=!1,cancelable:l=!1}={}){return new CustomEvent(e,{detail:n,bubbles:t,cancelable:l})}const ye=new Map;let ve=0;function Rn(e){let n=5381,t=e.length;for(;t--;)n=(n<<5)-n^e.charCodeAt(t);return n>>>0}function Fn(e,n){const t={stylesheet:Nn(n),rules:{}};return ye.set(e,t),t}function pe(e,n,t,l,i,o,s,a=0){const u=16.666/l;let r=`{
`;for(let g=0;g<=1;g+=u){const P=n+(t-n)*o(g);r+=g*100+`%{${s(P,1-P)}}
`}const f=r+`100% {${s(t,1-t)}}
}`,c=`__svelte_${Rn(f)}_${a}`,h=yn(e),{stylesheet:C,rules:d}=ye.get(h)||Fn(h,e);d[c]||(d[c]=!0,C.insertRule(`@keyframes ${c} ${f}`,C.cssRules.length));const k=e.style.animation||"";return e.style.animation=`${k?`${k}, `:""}${c} ${l}ms linear ${i}ms 1 both`,ve+=1,c}function Ie(e,n){const t=(e.style.animation||"").split(", "),l=t.filter(n?o=>o.indexOf(n)<0:o=>o.indexOf("__svelte")===-1),i=t.length-l.length;i&&(e.style.animation=l.join(", "),ve-=i,ve||On())}function On(){Fe(()=>{ve||(ye.forEach(e=>{const{ownerNode:n}=e.stylesheet;n&&D(n)}),ye.clear())})}let be;function ge(e){be=e}function Ue(){if(!be)throw new Error("Function called outside component initialization");return be}function Nt(e){Ue().$$.on_mount.push(e)}function At(e){Ue().$$.after_update.push(e)}function Bt(e){Ue().$$.on_destroy.push(e)}const oe=[],ce=[];let ue=[];const Ee=[],vn=Promise.resolve();let Ne=!1;function pn(){Ne||(Ne=!0,vn.then(In))}function Un(){return pn(),vn}function me(e){ue.push(e)}function jn(e){Ee.push(e)}const Se=new Set;let se=0;function In(){if(se!==0)return;const e=be;do{try{for(;se<oe.length;){const n=oe[se];se++,ge(n),qn(n.$$)}}catch(n){throw oe.length=0,se=0,n}for(ge(null),oe.length=0,se=0;ce.length;)ce.pop()();for(let n=0;n<ue.length;n+=1){const t=ue[n];Se.has(t)||(Se.add(t),t())}ue.length=0}while(oe.length);for(;Ee.length;)Ee.pop()();Ne=!1,Se.clear(),ge(e)}function qn(e){if(e.fragment!==null){e.update(),G(e.before_update);const n=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,n),e.after_update.forEach(me)}}function Hn(e){const n=[],t=[];ue.forEach(l=>e.indexOf(l)===-1?n.push(l):t.push(l)),t.forEach(l=>l()),ue=n}let he;function je(){return he||(he=Promise.resolve(),he.then(()=>{he=null})),he}function $(e,n,t){e.dispatchEvent(Dn(`${n?"intro":"outro"}${t}`))}const Ce=new Set;let Z;function Q(){Z={r:0,c:[],p:Z}}function X(){Z.r||G(Z.c),Z=Z.p}function M(e,n){e&&e.i&&(Ce.delete(e),e.i(n))}function N(e,n,t,l){if(e&&e.o){if(Ce.has(e))return;Ce.add(e),Z.c.push(()=>{Ce.delete(e),l&&(t&&e.d(1),l())}),e.o(n)}else l&&l()}const qe={duration:0};function Dt(e,n,t){const l={direction:"in"};let i=n(e,t,l),o=!1,s,a,u=0;function r(){s&&Ie(e,s)}function f(){const{delay:h=0,duration:C=300,easing:d=De,tick:k=U,css:g}=i||qe;g&&(s=pe(e,0,1,C,h,d,g,u++)),k(0,1);const P=Re()+h,S=P+C;a&&a.abort(),o=!0,me(()=>$(e,!0,"start")),a=Oe(_=>{if(o){if(_>=S)return k(1,0),$(e,!0,"end"),r(),o=!1;if(_>=P){const T=d((_-P)/C);k(T,1-T)}}return o})}let c=!1;return{start(){c||(c=!0,Ie(e),q(i)?(i=i(l),je().then(f)):f())},invalidate(){c=!1},end(){o&&(r(),o=!1)}}}function Rt(e,n,t){const l={direction:"out"};let i=n(e,t,l),o=!0,s;const a=Z;a.r+=1;let u;function r(){const{delay:f=0,duration:c=300,easing:h=De,tick:C=U,css:d}=i||qe;d&&(s=pe(e,1,0,c,f,h,d));const k=Re()+f,g=k+c;me(()=>$(e,!1,"start")),"inert"in e&&(u=e.inert,e.inert=!0),Oe(P=>{if(o){if(P>=g)return C(0,1),$(e,!1,"end"),--a.r||G(a.c),!1;if(P>=k){const S=h((P-k)/c);C(1-S,S)}}return o})}return q(i)?je().then(()=>{i=i(l),r()}):r(),{end(f){f&&"inert"in e&&(e.inert=u),f&&i.tick&&i.tick(1,0),o&&(s&&Ie(e,s),o=!1)}}}function Ft(e,n,t,l){let o=n(e,t,{direction:"both"}),s=l?0:1,a=null,u=null,r=null,f;function c(){r&&Ie(e,r)}function h(d,k){const g=d.b-s;return k*=Math.abs(g),{a:s,b:d.b,d:g,duration:k,start:d.start,end:d.start+k,group:d.group}}function C(d){const{delay:k=0,duration:g=300,easing:P=De,tick:S=U,css:_}=o||qe,T={start:Re()+k,b:d};d||(T.group=Z,Z.r+=1),"inert"in e&&(d?f!==void 0&&(e.inert=f):(f=e.inert,e.inert=!0)),a||u?u=T:(_&&(c(),r=pe(e,s,d,g,k,P,_)),d&&S(0,1),a=h(T,g),me(()=>$(e,d,"start")),Oe(w=>{if(u&&w>u.start&&(a=h(u,g),u=null,$(e,a.b,"start"),_&&(c(),r=pe(e,s,a.b,a.duration,0,P,o.css))),a){if(w>=a.end)S(s=a.b,1-s),$(e,a.b,"end"),u||(a.b?c():--a.group.r||G(a.group.c)),a=null;else if(w>=a.start){const v=w-a.start;s=a.a+a.d*P(v/a.duration),S(s,1-s)}}return!!(a||u)}))}return{run(d){q(o)?je().then(()=>{o=o({direction:d?"in":"out"}),C(d)}):C(d)},end(){c(),a=u=null}}}function ae(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Vn(e,n){e.d(1),n.delete(e.key)}function Ae(e,n){N(e,1,1,()=>{n.delete(e.key)})}function Ot(e,n){e.f(),Ae(e,n)}function Be(e,n,t,l,i,o,s,a,u,r,f,c){let h=e.length,C=o.length,d=h;const k={};for(;d--;)k[e[d].key]=d;const g=[],P=new Map,S=new Map,_=[];for(d=C;d--;){const p=c(i,o,d),R=t(p);let j=s.get(R);j?_.push(()=>j.p(p,n)):(j=r(R,p),j.c()),P.set(R,g[d]=j),R in k&&S.set(R,Math.abs(d-k[R]))}const T=new Set,w=new Set;function v(p){M(p,1),p.m(a,f),s.set(p.key,p),f=p.first,C--}for(;h&&C;){const p=g[C-1],R=e[h-1],j=p.key,H=R.key;p===R?(f=p.first,h--,C--):P.has(H)?!s.has(j)||T.has(j)?v(p):w.has(H)?h--:S.get(j)>S.get(H)?(w.add(j),v(p)):(T.add(H),h--):(u(R,s),h--)}for(;h--;){const p=e[h];P.has(p.key)||u(p,s)}for(;C;)v(g[C-1]);return G(_),g}function zn(e,n,t){const l=e.$$.props[n];l!==void 0&&(e.$$.bound[l]=t,t(e.$$.ctx[l]))}function W(e){e&&e.c()}function z(e,n,t){const{fragment:l,after_update:i}=e.$$;l&&l.m(n,t),me(()=>{const o=e.$$.on_mount.map(dn).filter(q);e.$$.on_destroy?e.$$.on_destroy.push(...o):G(o),e.$$.on_mount=[]}),i.forEach(me)}function K(e,n){const t=e.$$;t.fragment!==null&&(Hn(t.after_update),G(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx=[])}function Kn(e,n){e.$$.dirty[0]===-1&&(oe.push(e),pn(),e.$$.dirty.fill(0)),e.$$.dirty[n/31|0]|=1<<n%31}function ne(e,n,t,l,i,o,s=null,a=[-1]){const u=be;ge(e);const r=e.$$={fragment:null,ctx:[],props:o,update:U,not_equal:i,bound:ze(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(u?u.$$.context:[])),callbacks:ze(),dirty:a,skip_bound:!1,root:n.target||u.$$.root};s&&s(r.root);let f=!1;if(r.ctx=t?t(e,n.props||{},(c,h,...C)=>{const d=C.length?C[0]:h;return r.ctx&&i(r.ctx[c],r.ctx[c]=d)&&(!r.skip_bound&&r.bound[c]&&r.bound[c](d),f&&Kn(e,c)),h}):[],r.update(),f=!0,G(r.before_update),r.fragment=l?l(r.ctx):!1,n.target){if(n.hydrate){const c=Bn(n.target);r.fragment&&r.fragment.l(c),c.forEach(D)}else r.fragment&&r.fragment.c();n.intro&&M(e.$$.fragment),z(e,n.target,n.anchor),In()}ge(u)}class te{constructor(){Te(this,"$$");Te(this,"$$set")}$destroy(){K(this,1),this.$destroy=U}$on(n,t){if(!q(t))return U;const l=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return l.push(t),()=>{const i=l.indexOf(t);i!==-1&&l.splice(i,1)}}$set(n){this.$$set&&!En(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}const Wn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Wn);function Pn(e,n){function t(i){i.relatedTarget instanceof Node&&!e.contains(i.relatedTarget)&&n()}function l(i){i.target instanceof Node&&!e.contains(i.target)&&n()}return document.addEventListener("mousedown",l,{capture:!0,passive:!0}),e.addEventListener("focusout",t),{update(i){n=i},destroy(){document.removeEventListener("mousedown",l,{capture:!0}),e.removeEventListener("focusout",t)}}}function Gn(e,n){const t=i=>{i.stopPropagation(),i.preventDefault()},l=i=>{i?(e.classList.add("local-mail-busy"),e.addEventListener("keydown",t,{capture:!0})):(e.classList.remove("local-mail-busy"),e.removeEventListener("keydown",t,{capture:!0}))};return l(n),{update:l,destroy(){l(!1)}}}function He(){return window.M.cfg.wwwroot+"/local/satsmail/"}function Ut(e,n=[],t){const l=new URL(He()+"create.php");return e&&l.searchParams.set("course",String(e)),n.length&&l.searchParams.set("recipients",n.join(",")),t&&l.searchParams.set("role",t),l.searchParams.set("sesskey",window.M.cfg.sesskey),l.toString()}function jt(e){const n=new URL(He()+"download.php");return n.searchParams.set("m",String(e)),n.toString()}function qt(){const e=new URL(window.location.href),n={tray:e.searchParams.get("t")||void 0,courseid:parseInt(e.searchParams.get("c")||"")||void 0,labelid:parseInt(e.searchParams.get("l")||"")||void 0,messageid:parseInt(e.searchParams.get("m")||"")||void 0,offset:parseInt(e.searchParams.get("o")||"")||void 0,dialog:e.searchParams.get("d")||void 0},t={content:e.searchParams.get("s")||void 0,sendername:e.searchParams.get("sf")||void 0,recipientname:e.searchParams.get("st")||void 0,unread:e.searchParams.get("su")=="1"||void 0,withfilesonly:e.searchParams.get("sa")=="1"||void 0,maxtime:parseInt(e.searchParams.get("sd")||"")||void 0,startid:parseInt(e.searchParams.get("ss")||"")||void 0,reverse:e.searchParams.get("sr")=="1"||void 0};return Object.values(t).some(l=>l!=null)?{...n,search:t}:n}function Ht(e,n){const t=new URL(Pe(e));t.search!=window.location.search&&(n?window.history.replaceState(void 0,"",t.toString()):window.history.pushState(void 0,"",t.toString()))}function Pe(e){var t,l,i,o,s,a,u,r;const n=new URL(He()+"view.php");return e.tray&&n.searchParams.set("t",e.tray),e.courseid&&n.searchParams.set("c",String(e.courseid)),e.tray=="label"&&e.labelid&&n.searchParams.set("l",String(e.labelid)),e.messageid&&n.searchParams.set("m",String(e.messageid)),e.offset&&n.searchParams.set("o",String(e.offset)),(t=e.search)!=null&&t.content&&n.searchParams.set("s",e.search.content),(l=e.search)!=null&&l.sendername&&n.searchParams.set("sf",e.search.sendername),(i=e.search)!=null&&i.recipientname&&n.searchParams.set("st",e.search.recipientname),(o=e.search)!=null&&o.unread&&n.searchParams.set("su","1"),(s=e.search)!=null&&s.withfilesonly&&n.searchParams.set("sa","1"),(a=e.search)!=null&&a.maxtime&&n.searchParams.set("sd",String(e.search.maxtime)),(u=e.search)!=null&&u.startid&&n.searchParams.set("ss",String(e.search.startid)),(r=e.search)!=null&&r.reverse&&n.searchParams.set("sr","1"),e.dialog&&n.searchParams.set("d",e.dialog),n.toString()}const Vt=["","blue","indigo","purple","pink","red","orange","yellow","green","teal","cyan"];function We(e){const n=document.createElement("DIV");return n.innerHTML=e,n.innerText||""}function zt(e){if(e==0)return"";const n=new Date(e*1e3);return[String(n.getFullYear()),String(n.getMonth()+1).padStart(2,"0"),String(n.getDate()).padStart(2,"0")].join("-")}function _e(e,n){return e?n=="shortname"?We(e.shortname):We(e.fullname):""}function de(e){return new Intl.NumberFormat(window.M.str.langconfig.localecldr).format(e)}function Kt(e){const n=[{bytes:1099511627776,name:"TB"},{bytes:1073741824,name:"GB"},{bytes:1048576,name:"MB"},{bytes:1024,name:"KB"}];for(const t of n)if(e>=t.bytes)return`${Intl.NumberFormat(void 0,{maximumFractionDigits:1}).format(e/t.bytes)} ${t.name}`;return`${e} B`}function Wt(e){return e.trim().replaceAll(/\s+/gu," ")}function Gt(e,n){if(e=e||"",typeof n=="string"||typeof n=="number")e=e.replace("{$a}",n.toString());else for(const t in n)e=e.replace(`{$a->${t}}`,n[t].toString());return e}function Yt(e){return e?Math.floor(new Date(parseInt(e.slice(0,4)),parseInt(e.slice(5,7))-1,parseInt(e.slice(8,10)),23,59,59).getTime()/1e3):0}function Yn(e){let n,t,l,i,o=e[0].compose+"",s,a,u,r;return{c(){n=E("button"),t=E("i"),l=O(),i=E("span"),s=Y(o),b(t,"class","fa fa-edit mr-0 mr-sm-1"),A(i,"d-none",e[1]),b(n,"type","button"),b(n,"class","btn btn-primary text-truncate px-2 px-sm-3"),b(n,"aria-label",a=e[0].compose),A(n,"flex-shrink-0",e[1])},m(f,c){F(f,n,c),L(n,t),L(n,l),L(n,i),L(i,s),u||(r=V(n,"click",function(){q(e[2])&&e[2].apply(this,arguments)}),u=!0)},p(f,[c]){e=f,c&1&&o!==(o=e[0].compose+"")&&x(s,o),c&2&&A(i,"d-none",e[1]),c&1&&a!==(a=e[0].compose)&&b(n,"aria-label",a),c&2&&A(n,"flex-shrink-0",e[1])},i:U,o:U,d(f){f&&D(n),u=!1,r()}}}function Jn(e,n,t){let{strings:l}=n,{iconOnly:i=!1}=n,{onClick:o}=n;return e.$$set=s=>{"strings"in s&&t(0,l=s.strings),"iconOnly"in s&&t(1,i=s.iconOnly),"onClick"in s&&t(2,o=s.onClick)},[l,i,o]}class Qn extends te{constructor(n){super(),ne(this,n,Jn,Yn,ee,{strings:0,iconOnly:1,onClick:2})}}function Ve(e,n){function t(){e.offsetWidth<e.scrollWidth?e.setAttribute("title",n):e.removeAttribute("title")}return e.style.overflow="hidden",e.style.textOverflow="ellipsis",e.style.whiteSpace="nowrap",e.addEventListener("mouseenter",t),{update(l){n=l},destroy(){e.removeEventListener("mouseenter",t,!0)}}}const Xn=e=>({}),Ge=e=>({});function Zn(e){let n,t,l,i,o,s;return{c(){n=E("div"),t=Y(e[10]),b(n,"class",l="local-mail-combo-box-readonly form-control "+e[11]+" svelte-133mmuf"),A(n,"local-mail-combo-box-readonly-default",e[11]=="")},m(a,u){F(a,n,u),L(n,t),o||(s=fe(i=Ve.call(null,n,e[10])),o=!0)},p(a,u){u&1024&&x(t,a[10]),u&2048&&l!==(l="local-mail-combo-box-readonly form-control "+a[11]+" svelte-133mmuf")&&b(n,"class",l),i&&q(i.update)&&u&1024&&i.update.call(null,a[10]),u&2048&&A(n,"local-mail-combo-box-readonly-default",a[11]=="")},i:U,o:U,d(a){a&&D(n),o=!1,s()}}}function xn(e){let n,t,l,i,o,s;const a=e[25].buttonContent,u=hn(a,e,e[24],Ge),r=u||et(e);return{c(){n=E("button"),r&&r.c(),b(n,"type","button"),b(n,"class",t="local-mail-combo-box-button form-control btn "+e[9]+" svelte-133mmuf"),A(n,"local-mail-combo-box-button-default",e[9]==""),A(n,"local-mail-combo-box-padding-for-one-icon",e[4]&&!e[6]),A(n,"local-mail-combo-box-padding-for-two-icons",e[6])},m(f,c){F(f,n,c),r&&r.m(n,null),i=!0,o||(s=[fe(l=Ve.call(null,n,e[8])),V(n,"click",function(){q(e[18])&&e[18].apply(this,arguments)})],o=!0)},p(f,c){e=f,u?u.p&&(!i||c&16777216)&&bn(u,a,e,e[24],i?_n(a,e[24],c,Xn):kn(e[24]),Ge):r&&r.p&&(!i||c&256)&&r.p(e,i?c:-1),(!i||c&512&&t!==(t="local-mail-combo-box-button form-control btn "+e[9]+" svelte-133mmuf"))&&b(n,"class",t),l&&q(l.update)&&c&256&&l.update.call(null,e[8]),(!i||c&512)&&A(n,"local-mail-combo-box-button-default",e[9]==""),(!i||c&592)&&A(n,"local-mail-combo-box-padding-for-one-icon",e[4]&&!e[6]),(!i||c&576)&&A(n,"local-mail-combo-box-padding-for-two-icons",e[6])},i(f){i||(M(r,f),i=!0)},o(f){N(r,f),i=!1},d(f){f&&D(n),r&&r.d(f),o=!1,G(s)}}}function $n(e){let n,t,l;return{c(){n=E("input"),b(n,"type","text"),b(n,"class","local-mail-combo-box-input form-control svelte-133mmuf"),b(n,"placeholder",e[2]),b(n,"aria-label",e[2]),A(n,"local-mail-combo-box-padding-for-one-icon",e[4]||e[6]),A(n,"local-mail-combo-box-padding-for-two-icons",e[4]&&e[6]),A(n,"is-invalid",e[12])},m(i,o){F(i,n,o),e[26](n),Ke(n,e[0]),t||(l=[V(n,"input",e[27]),V(n,"focus",function(){q(e[13])&&e[13].apply(this,arguments)}),V(n,"input",e[28]),V(n,"keyup",e[21])],t=!0)},p(i,o){e=i,o&4&&b(n,"placeholder",e[2]),o&4&&b(n,"aria-label",e[2]),o&1&&n.value!==e[0]&&Ke(n,e[0]),o&80&&A(n,"local-mail-combo-box-padding-for-one-icon",e[4]||e[6]),o&80&&A(n,"local-mail-combo-box-padding-for-two-icons",e[4]&&e[6]),o&4096&&A(n,"is-invalid",e[12])},i:U,o:U,d(i){i&&D(n),e[26](null),t=!1,G(l)}}}function et(e){let n;return{c(){n=Y(e[8])},m(t,l){F(t,n,l)},p(t,l){l&256&&x(n,t[8])},d(t){t&&D(n)}}}function Ye(e){let n,t,l,i,o;return{c(){n=E("button"),t=E("i"),b(t,"class",l="fa fa-fw "+e[6]+" svelte-133mmuf"),b(t,"aria-hidden","true"),b(n,"type","button"),b(n,"class","local-mail-combo-box-middle-icon btn svelte-133mmuf"),b(n,"title",e[7])},m(s,a){F(s,n,a),L(n,t),i||(o=V(n,"click",function(){q(e[17])&&e[17].apply(this,arguments)}),i=!0)},p(s,a){e=s,a&64&&l!==(l="fa fa-fw "+e[6]+" svelte-133mmuf")&&b(t,"class",l),a&128&&b(n,"title",e[7])},d(s){s&&D(n),i=!1,o()}}}function Je(e){let n,t,l,i,o;return{c(){n=E("button"),t=E("i"),b(t,"class",l="fa fa-fw "+e[4]+" svelte-133mmuf"),b(t,"aria-hidden","true"),b(n,"type","button"),b(n,"class","local-mail-combo-box-right-icon btn svelte-133mmuf"),b(n,"title",e[5])},m(s,a){F(s,n,a),L(n,t),i||(o=V(n,"click",function(){q(e[16])&&e[16].apply(this,arguments)}),i=!0)},p(s,a){e=s,a&16&&l!==(l="fa fa-fw "+e[4]+" svelte-133mmuf")&&b(t,"class",l),a&32&&b(n,"title",e[5])},d(s){s&&D(n),i=!1,o()}}}function nt(e){let n,t,l,i,o,s,a,u,r,f,c,h,C,d;const k=[$n,xn,Zn],g=[];function P(v,p){return v[1]=="input"?0:v[1]=="button"?1:2}t=P(e),l=g[t]=k[t](e);let S=e[6]&&Ye(e),_=e[4]&&Je(e);const T=e[25].default,w=hn(T,e,e[24],null);return{c(){n=E("div"),l.c(),i=O(),o=E("div"),s=E("i"),u=O(),S&&S.c(),r=O(),_&&_.c(),f=O(),w&&w.c(),b(s,"class",a="fa fa-fw "+e[3]+" svelte-133mmuf"),b(s,"aria-hidden","true"),b(o,"class","local-mail-combo-box-left-icon svelte-133mmuf"),b(n,"class","local-mail-combo-box svelte-133mmuf")},m(v,p){F(v,n,p),g[t].m(n,null),L(n,i),L(n,o),L(o,s),L(n,u),S&&S.m(n,null),L(n,r),_&&_.m(n,null),L(n,f),w&&w.m(n,null),e[29](n),h=!0,C||(d=fe(c=Pn.call(null,n,e[30])),C=!0)},p(v,[p]){let R=t;t=P(v),t===R?g[t].p(v,p):(Q(),N(g[R],1,1,()=>{g[R]=null}),X(),l=g[t],l?l.p(v,p):(l=g[t]=k[t](v),l.c()),M(l,1),l.m(n,i)),(!h||p&8&&a!==(a="fa fa-fw "+v[3]+" svelte-133mmuf"))&&b(s,"class",a),v[6]?S?S.p(v,p):(S=Ye(v),S.c(),S.m(n,r)):S&&(S.d(1),S=null),v[4]?_?_.p(v,p):(_=Je(v),_.c(),_.m(n,f)):_&&(_.d(1),_=null),w&&w.p&&(!h||p&16777216)&&bn(w,T,v,v[24],h?_n(T,v[24],p,null):kn(v[24]),null),c&&q(c.update)&&p&16384&&c.update.call(null,v[30])},i(v){h||(M(l),M(w,v),h=!0)},o(v){N(l),N(w,v),h=!1},d(v){v&&D(n),g[t].d(),S&&S.d(),_&&_.d(),w&&w.d(v),e[29](null),C=!1,d()}}}function tt(e,n,t){let{$$slots:l={},$$scope:i}=n,{mode:o="input"}=n,{inputText:s}=n,{inputPlaceholder:a}=n,{leftIconClass:u}=n,{rightIconClass:r=""}=n,{rightIconLabel:f=""}=n,{middleIconClass:c=""}=n,{middleIconLabel:h=""}=n,{buttonText:C=""}=n,{buttonClass:d=""}=n,{readonlyText:k=""}=n,{readonlyClass:g=""}=n,{invalid:P=!1}=n,{onFocus:S=null}=n,{onBlur:_=null}=n,{onInput:T=null}=n,{onEnter:w=null}=n,{onRightIconClick:v=null}=n,{onMiddleIconClick:p=null}=n,{onButtonClick:R=null}=n;const j=async()=>{await Un(),J.focus()};let H,J;const ie=I=>{I.key=="Enter"?w==null||w():I.key=="Escape"&&(J.blur(),_==null||_())};function y(I){ce[I?"unshift":"push"](()=>{J=I,t(20,J)})}function m(){s=this.value,t(0,s)}const B=()=>T==null?void 0:T(s);function ke(I){ce[I?"unshift":"push"](()=>{H=I,t(19,H)})}const Tn=()=>_==null?void 0:_();return e.$$set=I=>{"mode"in I&&t(1,o=I.mode),"inputText"in I&&t(0,s=I.inputText),"inputPlaceholder"in I&&t(2,a=I.inputPlaceholder),"leftIconClass"in I&&t(3,u=I.leftIconClass),"rightIconClass"in I&&t(4,r=I.rightIconClass),"rightIconLabel"in I&&t(5,f=I.rightIconLabel),"middleIconClass"in I&&t(6,c=I.middleIconClass),"middleIconLabel"in I&&t(7,h=I.middleIconLabel),"buttonText"in I&&t(8,C=I.buttonText),"buttonClass"in I&&t(9,d=I.buttonClass),"readonlyText"in I&&t(10,k=I.readonlyText),"readonlyClass"in I&&t(11,g=I.readonlyClass),"invalid"in I&&t(12,P=I.invalid),"onFocus"in I&&t(13,S=I.onFocus),"onBlur"in I&&t(14,_=I.onBlur),"onInput"in I&&t(15,T=I.onInput),"onEnter"in I&&t(22,w=I.onEnter),"onRightIconClick"in I&&t(16,v=I.onRightIconClick),"onMiddleIconClick"in I&&t(17,p=I.onMiddleIconClick),"onButtonClick"in I&&t(18,R=I.onButtonClick),"$$scope"in I&&t(24,i=I.$$scope)},[s,o,a,u,r,f,c,h,C,d,k,g,P,S,_,T,v,p,R,H,J,ie,w,j,i,l,y,m,B,ke,Tn]}class lt extends te{constructor(n){super(),ne(this,n,tt,nt,ee,{mode:1,inputText:0,inputPlaceholder:2,leftIconClass:3,rightIconClass:4,rightIconLabel:5,middleIconClass:6,middleIconLabel:7,buttonText:8,buttonClass:9,readonlyText:10,readonlyClass:11,invalid:12,onFocus:13,onBlur:14,onInput:15,onEnter:22,onRightIconClick:16,onMiddleIconClick:17,onButtonClick:18,focus:23})}get focus(){return this.$$.ctx[23]}}function Qe(e,n,t){const l=e.slice();return l[27]=n[t],l}function Xe(e){let n,t=e[0].allcourses+"",l,i,o,s,a;return{c(){n=E("button"),l=Y(t),i=O(),o=E("div"),b(n,"type","button"),b(n,"class","dropdown-item text-truncate"),b(o,"class","dropdown-divider")},m(u,r){F(u,n,r),L(n,l),F(u,i,r),F(u,o,r),s||(a=V(n,"click",e[22]),s=!0)},p(u,r){r&1&&t!==(t=u[0].allcourses+"")&&x(l,t)},d(u){u&&(D(n),D(i),D(o)),s=!1,a()}}}function Ze(e){let n,t=e[0].nocoursematchestext+"",l,i;return{c(){n=E("div"),l=Y(t),i=O(),b(n,"class","px-4 text-danger")},m(o,s){F(o,n,s),L(n,l),L(n,i)},p(o,s){s&1&&t!==(t=o[0].nocoursematchestext+"")&&x(l,t)},d(o){o&&D(n)}}}function xe(e){let n,t=de(e[27].unread)+"",l;return{c(){n=E("span"),l=Y(t),b(n,"class","local-mail-select-course-badge svelte-1oco2vx")},m(i,o){F(i,n,o),L(n,l)},p(i,o){o&1024&&t!==(t=de(i[27].unread)+"")&&x(l,t)},d(i){i&&D(n)}}}function $e(e,n){let t,l,i=n[9](n[27])+"",o,s,a,u,r=n[27].unread>0&&xe(n);function f(){return n[23](n[27])}return{key:e,first:null,c(){t=E("button"),l=E("span"),o=O(),r&&r.c(),s=O(),b(l,"class","text-truncate"),b(t,"type","button"),b(t,"class","local-mail-select-course-item dropdown-item d-flex align-items-center svelte-1oco2vx"),this.first=t},m(c,h){F(c,t,h),L(t,l),l.innerHTML=i,L(t,o),r&&r.m(t,null),L(t,s),a||(u=V(t,"click",f),a=!0)},p(c,h){n=c,h&1536&&i!==(i=n[9](n[27])+"")&&(l.innerHTML=i),n[27].unread>0?r?r.p(n,h):(r=xe(n),r.c(),r.m(t,s)):r&&(r.d(1),r=null)},d(c){c&&D(t),r&&r.d(),a=!1,u()}}}function it(e){let n,t,l=[],i=new Map,o,s=!e[2]&&Xe(e),a=ae(e[10]);const u=f=>f[27].id;for(let f=0;f<a.length;f+=1){let c=Qe(e,a,f),h=u(c);i.set(h,l[f]=$e(h,c))}let r=null;return a.length||(r=Ze(e)),{c(){n=E("div"),s&&s.c(),t=O();for(let f=0;f<l.length;f+=1)l[f].c();r&&r.c(),b(n,"class",o="dropdown-menu dropdown-menu-"+e[5]+" svelte-1oco2vx"),A(n,"show",e[8])},m(f,c){F(f,n,c),s&&s.m(n,null),L(n,t);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(n,null);r&&r.m(n,null)},p(f,c){f[2]?s&&(s.d(1),s=null):s?s.p(f,c):(s=Xe(f),s.c(),s.m(n,t)),c&34305&&(a=ae(f[10]),l=Be(l,c,u,1,f,a,i,n,Vn,$e,null,Qe),!a.length&&r?r.p(f,c):a.length?r&&(r.d(1),r=null):(r=Ze(f),r.c(),r.m(n,null))),c&32&&o!==(o="dropdown-menu dropdown-menu-"+f[5]+" svelte-1oco2vx")&&b(n,"class",o),c&288&&A(n,"show",f[8])},d(f){f&&D(n),s&&s.d();for(let c=0;c<l.length;c+=1)l[c].d();r&&r.d()}}}function st(e){let n,t,l;function i(s){e[25](s)}let o={mode:e[3]?"readonly":e[8]?"input":"button",inputPlaceholder:e[0].course,leftIconClass:"fa-graduation-cap",rightIconClass:e[3]?"":e[8]?e[6]?"fa-times":"fa-caret-up":"fa-caret-down",rightIconLabel:e[8]&&e[6]?e[0].clearsearch:e[0].changecourse,buttonText:e[11]||e[1],buttonClass:e[4],readonlyText:e[11]||e[1],readonlyClass:"alert-secondary",onBlur:e[13],onButtonClick:e[12],onRightIconClick:e[8]?e[13]:e[12],$$slots:{default:[it]},$$scope:{ctx:e}};return e[6]!==void 0&&(o.inputText=e[6]),n=new lt({props:o}),e[24](n),ce.push(()=>zn(n,"inputText",i)),{c(){W(n.$$.fragment)},m(s,a){z(n,s,a),l=!0},p(s,[a]){const u={};a&264&&(u.mode=s[3]?"readonly":s[8]?"input":"button"),a&1&&(u.inputPlaceholder=s[0].course),a&328&&(u.rightIconClass=s[3]?"":s[8]?s[6]?"fa-times":"fa-caret-up":"fa-caret-down"),a&321&&(u.rightIconLabel=s[8]&&s[6]?s[0].clearsearch:s[0].changecourse),a&2050&&(u.buttonText=s[11]||s[1]),a&16&&(u.buttonClass=s[4]),a&2050&&(u.readonlyText=s[11]||s[1]),a&256&&(u.onRightIconClick=s[8]?s[13]:s[12]),a&1073743653&&(u.$$scope={dirty:a,ctx:s}),!t&&a&64&&(t=!0,u.inputText=s[6],jn(()=>t=!1)),n.$set(u)},i(s){l||(M(n.$$.fragment,s),l=!0)},o(s){N(n.$$.fragment,s),l=!1},d(s){e[24](null),K(n,s)}}}function ot(e,n,t){let l,i,o,s,{settings:a}=n,{strings:u}=n,{courses:r}=n,{label:f}=n,{selected:c}=n,{required:h=!1}=n,{readonly:C=!1}=n,{buttonClass:d=""}=n,{dropdownAlign:k="left"}=n,{onChange:g}=n,P,S,_=!1,T="";const w=m=>m.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&"),v=()=>{t(6,T=""),t(8,_=!0),P.focus()},p=()=>{t(8,_=!1),t(6,T="")},R=async()=>{await g(),t(16,c=void 0),p()},j=async m=>{await g(m.id),t(16,c=m.id),p()},H=()=>R(),J=m=>j(m);function ie(m){ce[m?"unshift":"push"](()=>{P=m,t(7,P)})}function y(m){T=m,t(6,T)}return e.$$set=m=>{"settings"in m&&t(17,a=m.settings),"strings"in m&&t(0,u=m.strings),"courses"in m&&t(18,r=m.courses),"label"in m&&t(1,f=m.label),"selected"in m&&t(16,c=m.selected),"required"in m&&t(2,h=m.required),"readonly"in m&&t(3,C=m.readonly),"buttonClass"in m&&t(4,d=m.buttonClass),"dropdownAlign"in m&&t(5,k=m.dropdownAlign),"onChange"in m&&t(19,g=m.onChange)},e.$$.update=()=>{e.$$.dirty&327680&&t(20,S=r.find(m=>m.id==c)),e.$$.dirty&1179648&&t(11,l=_e(S,a.filterbycourse)),e.$$.dirty&64&&t(21,i=new RegExp(w(T.trim()).replaceAll(/\s+/gu,"\\s+"),"giu")),e.$$.dirty&2490368&&t(10,o=r.filter(m=>_e(m,a.filterbycourse).match(i))),e.$$.dirty&2228224&&t(9,s=m=>_e(m,a.filterbycourse).replaceAll(i,B=>B.trim()?"<mark>"+B+"</mark>":B))},[u,f,h,C,d,k,T,P,_,s,o,l,v,p,R,j,c,a,r,g,S,i,H,J,ie,y]}class at extends te{constructor(n){super(),ne(this,n,ot,st,ee,{settings:17,strings:0,courses:18,label:1,selected:16,required:2,readonly:3,buttonClass:4,dropdownAlign:5,onChange:19})}}function en(e){let n,t=de(e[3])+"",l;return{c(){n=E("span"),l=Y(t),b(n,"class","badge text-dark")},m(i,o){F(i,n,o),L(n,l)},p(i,o){o&8&&t!==(t=de(i[3])+"")&&x(l,t)},d(i){i&&D(n)}}}function rt(e){let n,t,l,i,o,s,a,u,r,f,c,h,C,d=e[3]>0&&en(e);return{c(){n=E("a"),t=E("i"),o=O(),s=E("span"),a=Y(e[1]),r=O(),d&&d.c(),b(t,"class",l="fa "+e[0]+" fa-fw svelte-pity77"),b(t,"aria-hidden","true"),b(t,"style",i=e[6]&&!e[5]?`color: var(--local-mail-color-${e[6]}-bg)`:""),b(s,"class","flex-fill px-2"),b(n,"class","local-mail-menu-item list-group-item list-group-item-action d-flex align-items-center px-3 py-2 svelte-pity77"),b(n,"aria-current",e[5]),b(n,"aria-disabled",e[4]),b(n,"role","tab"),b(n,"href",f=Pe(e[2])),b(n,"style",c=e[6]&&!e[5]?`color: var(--local-mail-color-${e[6]}-fg)`:""),A(n,"list-group-item-primary",e[5]),A(n,"disabled",e[4])},m(k,g){F(k,n,g),L(n,t),L(n,o),L(n,s),L(s,a),L(n,r),d&&d.m(n,null),h||(C=[fe(u=Ve.call(null,s,e[1])),V(n,"click",e[7])],h=!0)},p(k,[g]){g&1&&l!==(l="fa "+k[0]+" fa-fw svelte-pity77")&&b(t,"class",l),g&96&&i!==(i=k[6]&&!k[5]?`color: var(--local-mail-color-${k[6]}-bg)`:"")&&b(t,"style",i),g&2&&x(a,k[1]),u&&q(u.update)&&g&2&&u.update.call(null,k[1]),k[3]>0?d?d.p(k,g):(d=en(k),d.c(),d.m(n,null)):d&&(d.d(1),d=null),g&32&&b(n,"aria-current",k[5]),g&16&&b(n,"aria-disabled",k[4]),g&4&&f!==(f=Pe(k[2]))&&b(n,"href",f),g&96&&c!==(c=k[6]&&!k[5]?`color: var(--local-mail-color-${k[6]}-fg)`:"")&&b(n,"style",c),g&32&&A(n,"list-group-item-primary",k[5]),g&16&&A(n,"disabled",k[4])},i:U,o:U,d(k){k&&D(n),d&&d.d(),h=!1,G(C)}}}function ut(e,n,t){let{icon:l}=n,{text:i}=n,{params:o}=n,{count:s=0}=n,{disabled:a=!1}=n,{active:u=!1}=n,{color:r=void 0}=n,{onClick:f=void 0}=n;const c=h=>{f&&(h.preventDefault(),f(o))};return e.$$set=h=>{"icon"in h&&t(0,l=h.icon),"text"in h&&t(1,i=h.text),"params"in h&&t(2,o=h.params),"count"in h&&t(3,s=h.count),"disabled"in h&&t(4,a=h.disabled),"active"in h&&t(5,u=h.active),"color"in h&&t(6,r=h.color),"onClick"in h&&t(8,f=h.onClick)},[l,i,o,s,a,u,r,c,f]}class le extends te{constructor(n){super(),ne(this,n,ut,rt,ee,{icon:0,text:1,params:2,count:3,disabled:4,active:5,color:6,onClick:8})}}function nn(e,n,t){const l=e.slice();return l[18]=n[t],l}function tn(e,n,t){const l=e.slice();return l[21]=n[t],l}function ln(e){let n,t;return n=new at({props:{settings:e[0],strings:e[1],courses:e[2],label:e[1].allcourses,selected:e[4].courseid,buttonClass:"btn-secondary",onChange:e[7]}}),{c(){W(n.$$.fragment)},m(l,i){z(n,l,i),t=!0},p(l,i){const o={};i&1&&(o.settings=l[0]),i&2&&(o.strings=l[1]),i&4&&(o.courses=l[2]),i&2&&(o.label=l[1].allcourses),i&16&&(o.selected=l[4].courseid),i&128&&(o.onChange=l[7]),n.$set(o)},i(l){t||(M(n.$$.fragment,l),t=!0)},o(l){N(n.$$.fragment,l),t=!1},d(l){K(n,l)}}}function sn(e){let n,t;return n=new le({props:{icon:"fa-star",text:e[1].starredplural,params:{tray:"starred",courseid:e[10],search:e[9]},active:e[4].tray=="starred",onClick:e[6]}}),{c(){W(n.$$.fragment)},m(l,i){z(n,l,i),t=!0},p(l,i){const o={};i&2&&(o.text=l[1].starredplural),i&1536&&(o.params={tray:"starred",courseid:l[10],search:l[9]}),i&16&&(o.active=l[4].tray=="starred"),i&64&&(o.onClick=l[6]),n.$set(o)},i(l){t||(M(n.$$.fragment,l),t=!0)},o(l){N(n.$$.fragment,l),t=!1},d(l){K(n,l)}}}function on(e){let n,t;return n=new le({props:{icon:"fa-paper-plane",text:e[1].sentplural,params:{tray:"sent",courseid:e[10],search:e[9]},active:e[4].tray=="sent",onClick:e[6]}}),{c(){W(n.$$.fragment)},m(l,i){z(n,l,i),t=!0},p(l,i){const o={};i&2&&(o.text=l[1].sentplural),i&1536&&(o.params={tray:"sent",courseid:l[10],search:l[9]}),i&16&&(o.active=l[4].tray=="sent"),i&64&&(o.onClick=l[6]),n.$set(o)},i(l){t||(M(n.$$.fragment,l),t=!0)},o(l){N(n.$$.fragment,l),t=!1},d(l){K(n,l)}}}function an(e){var l;let n,t;return n=new le({props:{icon:"fa-file",text:e[1].drafts,count:e[10]?(l=e[2].find(e[16]))==null?void 0:l.drafts:e[13],params:{tray:"drafts",courseid:e[10],search:e[9]},active:e[4].tray=="drafts",onClick:e[6]}}),{c(){W(n.$$.fragment)},m(i,o){z(n,i,o),t=!0},p(i,o){var a;const s={};o&2&&(s.text=i[1].drafts),o&9220&&(s.count=i[10]?(a=i[2].find(i[16]))==null?void 0:a.drafts:i[13]),o&1536&&(s.params={tray:"drafts",courseid:i[10],search:i[9]}),o&16&&(s.active=i[4].tray=="drafts"),o&64&&(s.onClick=i[6]),n.$set(s)},i(i){t||(M(n.$$.fragment,i),t=!0)},o(i){N(n.$$.fragment,i),t=!1},d(i){K(n,i)}}}function rn(e){let n,t;return n=new le({props:{icon:"fa-trash",text:e[1].trash,params:{tray:"trash",courseid:e[10],search:e[9]},active:e[4].tray=="trash",onClick:e[6]}}),{c(){W(n.$$.fragment)},m(l,i){z(n,l,i),t=!0},p(l,i){const o={};i&2&&(o.text=l[1].trash),i&1536&&(o.params={tray:"trash",courseid:l[10],search:l[9]}),i&16&&(o.active=l[4].tray=="trash"),i&64&&(o.onClick=l[6]),n.$set(o)},i(l){t||(M(n.$$.fragment,l),t=!0)},o(l){N(n.$$.fragment,l),t=!1},d(l){K(n,l)}}}function un(e,n){var o;let t,l,i;return l=new le({props:{icon:"fa-tag",text:n[21].name,count:n[10]?(o=n[21].courses.find(n[17]))==null?void 0:o.unread:n[21].unread,color:n[21].color,params:{tray:"label",labelid:n[21].id,courseid:n[10],search:n[9]},active:n[4].tray=="label"&&n[4].labelid==n[21].id,onClick:n[6]}}),{key:e,first:null,c(){t=Me(),W(l.$$.fragment),this.first=t},m(s,a){F(s,t,a),z(l,s,a),i=!0},p(s,a){var r;n=s;const u={};a&8&&(u.text=n[21].name),a&1032&&(u.count=n[10]?(r=n[21].courses.find(n[17]))==null?void 0:r.unread:n[21].unread),a&8&&(u.color=n[21].color),a&1544&&(u.params={tray:"label",labelid:n[21].id,courseid:n[10],search:n[9]}),a&24&&(u.active=n[4].tray=="label"&&n[4].labelid==n[21].id),a&64&&(u.onClick=n[6]),l.$set(u)},i(s){i||(M(l.$$.fragment,s),i=!0)},o(s){N(l.$$.fragment,s),i=!1},d(s){s&&D(t),K(l,s)}}}function fn(e){let n,t;return n=new le({props:{icon:"fa-graduation-cap",text:_e(e[18],e[0].coursetraysname),count:e[18].unread,params:e[8]?{tray:"inbox",courseid:e[18].id,search:e[9]}:{tray:"course",courseid:e[18].id,search:e[9]},active:(e[4].tray=="course"||!e[4].tray&&!e[8])&&e[4].courseid==e[18].id,onClick:e[6]}}),{c(){W(n.$$.fragment)},m(l,i){z(n,l,i),t=!0},p(l,i){const o={};i&5&&(o.text=_e(l[18],l[0].coursetraysname)),i&4&&(o.count=l[18].unread),i&772&&(o.params=l[8]?{tray:"inbox",courseid:l[18].id,search:l[9]}:{tray:"course",courseid:l[18].id,search:l[9]}),i&276&&(o.active=(l[4].tray=="course"||!l[4].tray&&!l[8])&&l[4].courseid==l[18].id),i&64&&(o.onClick=l[6]),n.$set(o)},i(l){t||(M(n.$$.fragment,l),t=!0)},o(l){N(n.$$.fragment,l),t=!1},d(l){K(n,l)}}}function cn(e,n){let t,l=n[11](n[18])&&(!n[8]||n[18].id!=n[10]),i,o,s=l&&fn(n);return{key:e,first:null,c(){t=Me(),s&&s.c(),i=Me(),this.first=t},m(a,u){F(a,t,u),s&&s.m(a,u),F(a,i,u),o=!0},p(a,u){n=a,u&3332&&(l=n[11](n[18])&&(!n[8]||n[18].id!=n[10])),l?s?(s.p(n,u),u&3332&&M(s,1)):(s=fn(n),s.c(),M(s,1),s.m(i.parentNode,i)):s&&(Q(),N(s,1,1,()=>{s=null}),X())},i(a){o||(M(s),o=!0)},o(a){N(s),o=!1},d(a){a&&(D(t),D(i)),s&&s.d(a)}}}function ft(e){var ie;let n,t,l,i,o=e[12]("starred"),s,a=e[12]("sent"),u,r=e[12]("drafts"),f,c=e[12]("trash"),h,C=[],d=new Map,k,g=[],P=new Map,S,_=(e[8]||e[10])&&ln(e);l=new le({props:{icon:"fa-inbox",text:e[1].inbox,count:e[10]?(ie=e[2].find(e[15]))==null?void 0:ie.unread:e[14],params:{tray:"inbox",courseid:e[10],search:e[9]},active:e[4].tray=="inbox",onClick:e[6]}});let T=o&&sn(e),w=a&&on(e),v=r&&an(e),p=c&&rn(e),R=ae(e[3]);const j=y=>y[21].id;for(let y=0;y<R.length;y+=1){let m=tn(e,R,y),B=j(m);d.set(B,C[y]=un(B,m))}let H=ae(e[2]);const J=y=>y[18].id;for(let y=0;y<H.length;y+=1){let m=nn(e,H,y),B=J(m);P.set(B,g[y]=cn(B,m))}return{c(){n=E("div"),_&&_.c(),t=O(),W(l.$$.fragment),i=O(),T&&T.c(),s=O(),w&&w.c(),u=O(),v&&v.c(),f=O(),p&&p.c(),h=O();for(let y=0;y<C.length;y+=1)C[y].c();k=O();for(let y=0;y<g.length;y+=1)g[y].c();b(n,"class","list-group svelte-h7j9mf"),A(n,"local-mail-menu-navbar",e[5]),A(n,"list-group-flush",e[5]),A(n,"border-top",e[5])},m(y,m){F(y,n,m),_&&_.m(n,null),L(n,t),z(l,n,null),L(n,i),T&&T.m(n,null),L(n,s),w&&w.m(n,null),L(n,u),v&&v.m(n,null),L(n,f),p&&p.m(n,null),L(n,h);for(let B=0;B<C.length;B+=1)C[B]&&C[B].m(n,null);L(n,k);for(let B=0;B<g.length;B+=1)g[B]&&g[B].m(n,null);S=!0},p(y,[m]){var ke;y[8]||y[10]?_?(_.p(y,m),m&1280&&M(_,1)):(_=ln(y),_.c(),M(_,1),_.m(n,t)):_&&(Q(),N(_,1,1,()=>{_=null}),X());const B={};m&2&&(B.text=y[1].inbox),m&17412&&(B.count=y[10]?(ke=y[2].find(y[15]))==null?void 0:ke.unread:y[14]),m&1536&&(B.params={tray:"inbox",courseid:y[10],search:y[9]}),m&16&&(B.active=y[4].tray=="inbox"),m&64&&(B.onClick=y[6]),l.$set(B),m&4096&&(o=y[12]("starred")),o?T?(T.p(y,m),m&4096&&M(T,1)):(T=sn(y),T.c(),M(T,1),T.m(n,s)):T&&(Q(),N(T,1,1,()=>{T=null}),X()),m&4096&&(a=y[12]("sent")),a?w?(w.p(y,m),m&4096&&M(w,1)):(w=on(y),w.c(),M(w,1),w.m(n,u)):w&&(Q(),N(w,1,1,()=>{w=null}),X()),m&4096&&(r=y[12]("drafts")),r?v?(v.p(y,m),m&4096&&M(v,1)):(v=an(y),v.c(),M(v,1),v.m(n,f)):v&&(Q(),N(v,1,1,()=>{v=null}),X()),m&4096&&(c=y[12]("trash")),c?p?(p.p(y,m),m&4096&&M(p,1)):(p=rn(y),p.c(),M(p,1),p.m(n,h)):p&&(Q(),N(p,1,1,()=>{p=null}),X()),m&1624&&(R=ae(y[3]),Q(),C=Be(C,m,j,1,y,R,d,n,Ae,un,k,tn),X()),m&3925&&(H=ae(y[2]),Q(),g=Be(g,m,J,1,y,H,P,n,Ae,cn,null,nn),X()),(!S||m&32)&&A(n,"local-mail-menu-navbar",y[5]),(!S||m&32)&&A(n,"list-group-flush",y[5]),(!S||m&32)&&A(n,"border-top",y[5])},i(y){if(!S){M(_),M(l.$$.fragment,y),M(T),M(w),M(v),M(p);for(let m=0;m<R.length;m+=1)M(C[m]);for(let m=0;m<H.length;m+=1)M(g[m]);S=!0}},o(y){N(_),N(l.$$.fragment,y),N(T),N(w),N(v),N(p);for(let m=0;m<C.length;m+=1)N(C[m]);for(let m=0;m<g.length;m+=1)N(g[m]);S=!1},d(y){y&&D(n),_&&_.d(),K(l),T&&T.d(),w&&w.d(),v&&v.d(),p&&p.d();for(let m=0;m<C.length;m+=1)C[m].d();for(let m=0;m<g.length;m+=1)g[m].d()}}}function ct(e,n,t){let l,i,o,s,a,u,r,{settings:f}=n,{strings:c}=n,{courses:h}=n,{labels:C}=n,{params:d}=n,{navbar:k=!1}=n,{onClick:g=void 0}=n,{onCourseChange:P}=n;const S=w=>w.id==u,_=w=>w.id==u,T=w=>w.id==u;return e.$$set=w=>{"settings"in w&&t(0,f=w.settings),"strings"in w&&t(1,c=w.strings),"courses"in w&&t(2,h=w.courses),"labels"in w&&t(3,C=w.labels),"params"in w&&t(4,d=w.params),"navbar"in w&&t(5,k=w.navbar),"onClick"in w&&t(6,g=w.onClick),"onCourseChange"in w&&t(7,P=w.onCourseChange)},e.$$.update=()=>{e.$$.dirty&4&&t(14,l=h.reduce((w,v)=>w+v.unread,0)),e.$$.dirty&4&&t(13,i=h.reduce((w,v)=>w+v.drafts,0)),e.$$.dirty&17&&t(12,o=w=>f.globaltrays.includes(w)||d.tray==w),e.$$.dirty&17&&t(11,s=w=>f.coursetrays=="all"||f.coursetrays=="unread"&&(w.unread||0)>0||d.tray=="course"&&d.courseid==w.id),e.$$.dirty&1&&t(8,a=["shortname","fullname"].includes(f.filterbycourse)),e.$$.dirty&272&&t(10,u=a?d.courseid:void 0),e.$$.dirty&16&&t(9,r=d.search?{content:d.search.content,sendername:d.search.sendername,recipientname:d.search.recipientname,maxtime:d.search.maxtime,unread:d.search.unread,withfilesonly:d.search.withfilesonly}:void 0)},[f,c,h,C,d,k,g,P,a,r,u,s,o,i,l,S,_,T]}class mt extends te{constructor(n){super(),ne(this,n,ct,ft,ee,{settings:0,strings:1,courses:2,labels:3,params:4,navbar:5,onClick:6,onCourseChange:7})}}function dt(e){let n,t,l,i,o;return{c(){n=E("button"),t=E("i"),b(t,"class","fa fa-cog"),b(t,"aria-hidden",!0),b(n,"type","button"),b(n,"class","btn btn-secondary text-truncate"),b(n,"title",l=e[0].preferences)},m(s,a){F(s,n,a),L(n,t),i||(o=V(n,"click",function(){q(e[1])&&e[1].apply(this,arguments)}),i=!0)},p(s,[a]){e=s,a&1&&l!==(l=e[0].preferences)&&b(n,"title",l)},i:U,o:U,d(s){s&&D(n),i=!1,o()}}}function ht(e,n,t){let{strings:l}=n,{onClick:i}=n;return e.$$set=o=>{"strings"in o&&t(0,l=o.strings),"onClick"in o&&t(1,i=o.onClick)},[l,i]}class gt extends te{constructor(n){super(),ne(this,n,ht,dt,ee,{strings:0,onClick:1})}}function _t(e){let n,t=de(e[8])+"",l;return{c(){n=E("div"),l=Y(t),b(n,"class","local-mail-navbar-count count-container svelte-1aihbok")},m(i,o){F(i,n,o),L(n,l)},p(i,o){o&256&&t!==(t=de(i[8])+"")&&x(l,t)},d(i){i&&D(n)}}}function bt(e){let n;return{c(){n=E("div"),n.innerHTML='<i class="fa fa-fw fa-spinner fa-pulse text-primary svelte-1aihbok"></i>',b(n,"class","local-mail-navbar-spinner position-absolute svelte-1aihbok")},m(t,l){F(t,n,l)},p:U,d(t){t&&D(n)}}}function mn(e){let n,t,l,i,o,s,a,u;return l=new Qn({props:{strings:e[1],onClick:e[10]}}),o=new gt({props:{strings:e[1],onClick:e[13]}}),a=new mt({props:{settings:e[0],strings:e[1],courses:e[2],labels:e[3],params:e[4],navbar:!0,onClick:e[12],onCourseChange:e[6]}}),{c(){n=E("div"),t=E("div"),W(l.$$.fragment),i=O(),W(o.$$.fragment),s=O(),W(a.$$.fragment),b(t,"class","d-flex justify-content-between p-2"),b(n,"class","local-mail-navbar-popover popover-region-container svelte-1aihbok")},m(r,f){F(r,n,f),L(n,t),z(l,t,null),L(t,i),z(o,t,null),L(n,s),z(a,n,null),u=!0},p(r,f){const c={};f&2&&(c.strings=r[1]),l.$set(c);const h={};f&2&&(h.strings=r[1]),o.$set(h);const C={};f&1&&(C.settings=r[0]),f&2&&(C.strings=r[1]),f&4&&(C.courses=r[2]),f&8&&(C.labels=r[3]),f&16&&(C.params=r[4]),f&64&&(C.onCourseChange=r[6]),a.$set(C)},i(r){u||(M(l.$$.fragment,r),M(o.$$.fragment,r),M(a.$$.fragment,r),u=!0)},o(r){N(l.$$.fragment,r),N(o.$$.fragment,r),N(a.$$.fragment,r),u=!1},d(r){r&&D(n),K(l),K(o),K(a)}}}function kt(e){let n,t,l,i,o,s,a,u,r,f,c;function h(g,P){if(g[5])return bt;if(g[8]>0)return _t}let C=h(e),d=C&&C(e),k=e[7]&&mn(e);return{c(){n=E("div"),t=E("a"),l=E("i"),o=O(),d&&d.c(),a=O(),k&&k.c(),b(l,"class","fa fa-fw fa-envelope-o icon m-0"),b(l,"aria-label",i=e[1].plugginname),b(t,"aria-expanded",e[7]),b(t,"class","nav-link btn h-100 position-relative d-flex align-items-center px-2 py-0 rounded-0"),b(t,"href",Pe({tray:"inbox"})),b(t,"title",s=e[1].pluginname),b(n,"class","local-mail local-mail-navbar pop-over-region h-100 svelte-1aihbok"),A(n,"popover-region-toggle",e[7])},m(g,P){F(g,n,P),L(n,t),L(t,l),L(t,o),d&&d.m(t,null),L(n,a),k&&k.m(n,null),r=!0,f||(c=[V(t,"click",e[11]),fe(Pn.call(null,n,e[9])),fe(u=Gn.call(null,n,e[5]))],f=!0)},p(g,[P]){(!r||P&2&&i!==(i=g[1].plugginname))&&b(l,"aria-label",i),C===(C=h(g))&&d?d.p(g,P):(d&&d.d(1),d=C&&C(g),d&&(d.c(),d.m(t,null))),(!r||P&128)&&b(t,"aria-expanded",g[7]),(!r||P&2&&s!==(s=g[1].pluginname))&&b(t,"title",s),g[7]?k?(k.p(g,P),P&128&&M(k,1)):(k=mn(g),k.c(),M(k,1),k.m(n,null)):k&&(Q(),N(k,1,1,()=>{k=null}),X()),u&&q(u.update)&&P&32&&u.update.call(null,g[5]),(!r||P&128)&&A(n,"popover-region-toggle",g[7])},i(g){r||(M(k),r=!0)},o(g){N(k),r=!1},d(g){g&&D(n),d&&d.d(),k&&k.d(),f=!1,G(c)}}}function wt(e,n,t){let l,{settings:i}=n,{strings:o}=n,{courses:s}=n,{labels:a}=n,{params:u}=n,{loading:r}=n,{onClick:f}=n,{onComposeClick:c}=n,{onCourseChange:h}=n,C=!1;const d=()=>{t(7,C=!1)},k=()=>{d(),c(u.courseid)},g=_=>{_.preventDefault(),i.globaltrays.length>0||a.length>0?t(7,C=!C):f({tray:"inbox"})},P=_=>{d(),f(_)},S=()=>{d(),f({...u,dialog:"preferences"})};return e.$$set=_=>{"settings"in _&&t(0,i=_.settings),"strings"in _&&t(1,o=_.strings),"courses"in _&&t(2,s=_.courses),"labels"in _&&t(3,a=_.labels),"params"in _&&t(4,u=_.params),"loading"in _&&t(5,r=_.loading),"onClick"in _&&t(14,f=_.onClick),"onComposeClick"in _&&t(15,c=_.onComposeClick),"onCourseChange"in _&&t(6,h=_.onCourseChange)},e.$$.update=()=>{e.$$.dirty&4&&t(8,l=s.reduce((_,T)=>_+T.unread,0))},[i,o,s,a,u,r,h,C,l,d,k,g,P,S,f,c]}class Jt extends te{constructor(n){super(),ne(this,n,wt,kt,ee,{settings:0,strings:1,courses:2,labels:3,params:4,loading:5,onClick:14,onComposeClick:15,onCourseChange:6})}}const Le={};async function Qt(e){return Le[e]==null&&(Le[e]=await new Promise(n=>{window.require([e],n)})),Le[e]}export{St as $,bn as A,kn as B,_n as C,V as D,fe as E,q as F,Pn as G,O as H,Nt as I,Bt as J,ce as K,Q as L,X as M,K as N,z as O,W as P,A as Q,Vt as R,te as S,Wt as T,ae as U,Ke as V,Be as W,Vn as X,Tt as Y,Lt as Z,de as _,Re as a,Ve as a0,Ae as a1,Dt as a2,Pe as a3,Ot as a4,Rt as a5,Qt as a6,Un as a7,Pt as a8,Kt as a9,vt as aa,jt as ab,At as ac,lt as ad,zn as ae,jn as af,Mt as ag,Et as ah,at as ai,zt as aj,Yt as ak,Gn as al,Qn as am,mt as an,qt as ao,gt as ap,yt as aq,Ht as ar,Jt as as,Ut as at,ne as b,pe as c,Ie as d,ee as e,D as f,F as g,Me as h,De as i,E as j,b as k,Oe as l,_e as m,U as n,x as o,L as p,It as q,Gt as r,pt as s,Y as t,hn as u,G as v,N as w,Ft as x,M as y,me as z};
//# sourceMappingURL=global-CUTJa-Jf.js.map

