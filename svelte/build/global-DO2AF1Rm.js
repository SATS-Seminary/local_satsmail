var Lt=Object.defineProperty;var Mt=(t,e,n)=>e in t?Lt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Se=(t,e,n)=>Mt(t,typeof e!="symbol"?e+"":e,n);function U(){}const De=t=>t;function Et(t,e){for(const n in e)t[n]=e[n];return t}function gt(t){return t()}function We(){return Object.create(null)}function Y(t){t.forEach(gt)}function z(t){return typeof t=="function"}function yn(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ce;function In(t,e){return t===e?!0:(Ce||(Ce=document.createElement("a")),Ce.href=e,t===Ce.href)}function le(t,e){return t!=t?e==e:t!==e}function qt(t){return Object.keys(t).length===0}function Pn(t,...e){if(t==null){for(const l of e)l(void 0);return U}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function _t(t,e,n,l){if(t){const i=bt(t,e,n,l);return t[0](i)}}function bt(t,e,n,l){return t[1]&&l?Et(n.ctx.slice(),t[1](l(e))):n.ctx}function kt(t,e,n,l){if(t[2]&&l){const i=t[2](l(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const a=[],s=Math.max(e.dirty.length,i.length);for(let o=0;o<s;o+=1)a[o]=e.dirty[o]|i[o];return a}return e.dirty|i}return e.dirty}function wt(t,e,n,l,i,a){if(i){const s=bt(e,n,l,a);t.p(s,i)}}function Ct(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function me(t){return t&&z(t.destroy)?t.destroy:U}function Tn(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const vt=typeof window<"u";let Re=vt?()=>window.performance.now():()=>Date.now(),Fe=vt?t=>requestAnimationFrame(t):U;const ue=new Set;function pt(t){ue.forEach(e=>{e.c(t)||(ue.delete(e),e.f())}),ue.size!==0&&Fe(pt)}function je(t){let e;return ue.size===0&&Fe(pt),{promise:new Promise(n=>{ue.add(e={c:t,f:n})}),abort(){ue.delete(e)}}}function L(t,e){t.appendChild(e)}function yt(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Nt(t){const e=A("style");return e.textContent="/* empty */",At(yt(t),e),e.sheet}function At(t,e){return L(t.head||t,e),e.sheet}function j(t,e,n){t.insertBefore(e,n||null)}function F(t){t.parentNode&&t.parentNode.removeChild(t)}function Sn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function A(t){return document.createElement(t)}function X(t){return document.createTextNode(t)}function O(){return X(" ")}function Ee(){return X("")}function W(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function Ln(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Mn(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Bt(t){return Array.from(t.childNodes)}function $(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ge(t,e){t.value=e??""}function En(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function qn(t,e,n){for(let l=0;l<t.options.length;l+=1){const i=t.options[l];if(i.__value===e){i.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Nn(t){const e=t.querySelector(":checked");return e&&e.__value}function D(t,e,n){t.classList.toggle(e,!!n)}function Dt(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}const pe=new Map;let ye=0;function Rt(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Ft(t,e){const n={stylesheet:Nt(e),rules:{}};return pe.set(t,n),n}function Ie(t,e,n,l,i,a,s,o=0){const f=16.666/l;let r=`{
`;for(let _=0;_<=1;_+=f){const T=e+(n-e)*a(_);r+=_*100+`%{${s(T,1-T)}}
`}const u=r+`100% {${s(n,1-n)}}
}`,c=`__svelte_${Rt(u)}_${o}`,d=yt(t),{stylesheet:v,rules:m}=pe.get(d)||Ft(d,t);m[c]||(m[c]=!0,v.insertRule(`@keyframes ${c} ${u}`,v.cssRules.length));const h=t.style.animation||"";return t.style.animation=`${h?`${h}, `:""}${c} ${l}ms linear ${i}ms 1 both`,ye+=1,c}function Pe(t,e){const n=(t.style.animation||"").split(", "),l=n.filter(e?a=>a.indexOf(e)<0:a=>a.indexOf("__svelte")===-1),i=n.length-l.length;i&&(t.style.animation=l.join(", "),ye-=i,ye||jt())}function jt(){Fe(()=>{ye||(pe.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&F(e)}),pe.clear())})}let we;function be(t){we=t}function Oe(){if(!we)throw new Error("Function called outside component initialization");return we}function An(t){Oe().$$.on_mount.push(t)}function Bn(t){Oe().$$.after_update.push(t)}function Dn(t){Oe().$$.on_destroy.push(t)}const re=[],de=[];let ce=[];const qe=[],It=Promise.resolve();let Ne=!1;function Pt(){Ne||(Ne=!0,It.then(Tt))}function Ot(){return Pt(),It}function he(t){ce.push(t)}function Ut(t){qe.push(t)}const Le=new Set;let oe=0;function Tt(){if(oe!==0)return;const t=we;do{try{for(;oe<re.length;){const e=re[oe];oe++,be(e),zt(e.$$)}}catch(e){throw re.length=0,oe=0,e}for(be(null),re.length=0,oe=0;de.length;)de.pop()();for(let e=0;e<ce.length;e+=1){const n=ce[e];Le.has(n)||(Le.add(n),n())}ce.length=0}while(re.length);for(;qe.length;)qe.pop()();Ne=!1,Le.clear(),be(t)}function zt(t){if(t.fragment!==null){t.update(),Y(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(he)}}function Ht(t){const e=[],n=[];ce.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),ce=e}let _e;function Ue(){return _e||(_e=Promise.resolve(),_e.then(()=>{_e=null})),_e}function ne(t,e,n){t.dispatchEvent(Dt(`${e?"intro":"outro"}${n}`))}const ve=new Set;let Z;function J(){Z={r:0,c:[],p:Z}}function Q(){Z.r||Y(Z.c),Z=Z.p}function S(t,e){t&&t.i&&(ve.delete(t),t.i(e))}function N(t,e,n,l){if(t&&t.o){if(ve.has(t))return;ve.add(t),Z.c.push(()=>{ve.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}const ze={duration:0};function Rn(t,e,n){const l={direction:"in"};let i=e(t,n,l),a=!1,s,o,f=0;function r(){s&&Pe(t,s)}function u(){const{delay:d=0,duration:v=300,easing:m=De,tick:h=U,css:_}=i||ze;_&&(s=Ie(t,0,1,v,d,m,_,f++)),h(0,1);const T=Re()+d,P=T+v;o&&o.abort(),a=!0,he(()=>ne(t,!0,"start")),o=je(w=>{if(a){if(w>=P)return h(1,0),ne(t,!0,"end"),r(),a=!1;if(w>=T){const q=m((w-T)/v);h(q,1-q)}}return a})}let c=!1;return{start(){c||(c=!0,Pe(t),z(i)?(i=i(l),Ue().then(u)):u())},invalidate(){c=!1},end(){a&&(r(),a=!1)}}}function Fn(t,e,n){const l={direction:"out"};let i=e(t,n,l),a=!0,s;const o=Z;o.r+=1;let f;function r(){const{delay:u=0,duration:c=300,easing:d=De,tick:v=U,css:m}=i||ze;m&&(s=Ie(t,1,0,c,u,d,m));const h=Re()+u,_=h+c;he(()=>ne(t,!1,"start")),"inert"in t&&(f=t.inert,t.inert=!0),je(T=>{if(a){if(T>=_)return v(0,1),ne(t,!1,"end"),--o.r||Y(o.c),!1;if(T>=h){const P=d((T-h)/c);v(1-P,P)}}return a})}return z(i)?Ue().then(()=>{i=i(l),r()}):r(),{end(u){u&&"inert"in t&&(t.inert=f),u&&i.tick&&i.tick(1,0),a&&(s&&Pe(t,s),a=!1)}}}function jn(t,e,n,l){let a=e(t,n,{direction:"both"}),s=l?0:1,o=null,f=null,r=null,u;function c(){r&&Pe(t,r)}function d(m,h){const _=m.b-s;return h*=Math.abs(_),{a:s,b:m.b,d:_,duration:h,start:m.start,end:m.start+h,group:m.group}}function v(m){const{delay:h=0,duration:_=300,easing:T=De,tick:P=U,css:w}=a||ze,q={start:Re()+h,b:m};m||(q.group=Z,Z.r+=1),"inert"in t&&(m?u!==void 0&&(t.inert=u):(u=t.inert,t.inert=!0)),o||f?f=q:(w&&(c(),r=Ie(t,s,m,_,h,T,w)),m&&P(0,1),o=d(q,_),he(()=>ne(t,m,"start")),je(b=>{if(f&&b>f.start&&(o=d(f,_),f=null,ne(t,o.b,"start"),w&&(c(),r=Ie(t,s,o.b,o.duration,0,T,a.css))),o){if(b>=o.end)P(s=o.b,1-s),ne(t,o.b,"end"),f||(o.b?c():--o.group.r||Y(o.group.c)),o=null;else if(b>=o.start){const y=b-o.start;s=o.a+o.d*T(y/o.duration),P(s,1-s)}}return!!(o||f)}))}return{run(m){z(a)?Ue().then(()=>{a=a({direction:m?"in":"out"}),v(m)}):v(m)},end(){c(),o=f=null}}}function fe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Vt(t,e){t.d(1),e.delete(t.key)}function Ae(t,e){N(t,1,1,()=>{e.delete(t.key)})}function On(t,e){t.f(),Ae(t,e)}function Be(t,e,n,l,i,a,s,o,f,r,u,c){let d=t.length,v=a.length,m=d;const h={};for(;m--;)h[t[m].key]=m;const _=[],T=new Map,P=new Map,w=[];for(m=v;m--;){const I=c(i,a,m),E=n(I);let B=s.get(E);B?w.push(()=>B.p(I,e)):(B=r(E,I),B.c()),T.set(E,_[m]=B),E in h&&P.set(E,Math.abs(m-h[E]))}const q=new Set,b=new Set;function y(I){S(I,1),I.m(o,u),s.set(I.key,I),u=I.first,v--}for(;d&&v;){const I=_[v-1],E=t[d-1],B=I.key,R=E.key;I===E?(u=I.first,d--,v--):T.has(R)?!s.has(B)||q.has(B)?y(I):b.has(R)?d--:P.get(B)>P.get(R)?(b.add(B),y(I)):(q.add(R),d--):(f(E,s),d--)}for(;d--;){const I=t[d];T.has(I.key)||f(I,s)}for(;v;)y(_[v-1]);return Y(w),_}function Kt(t,e,n){const l=t.$$.props[e];l!==void 0&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function G(t){t&&t.c()}function H(t,e,n){const{fragment:l,after_update:i}=t.$$;l&&l.m(e,n),he(()=>{const a=t.$$.on_mount.map(gt).filter(z);t.$$.on_destroy?t.$$.on_destroy.push(...a):Y(a),t.$$.on_mount=[]}),i.forEach(he)}function V(t,e){const n=t.$$;n.fragment!==null&&(Ht(n.after_update),Y(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Wt(t,e){t.$$.dirty[0]===-1&&(re.push(t),Pt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ie(t,e,n,l,i,a,s=null,o=[-1]){const f=we;be(t);const r=t.$$={fragment:null,ctx:[],props:a,update:U,not_equal:i,bound:We(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:We(),dirty:o,skip_bound:!1,root:e.target||f.$$.root};s&&s(r.root);let u=!1;if(r.ctx=n?n(t,e.props||{},(c,d,...v)=>{const m=v.length?v[0]:d;return r.ctx&&i(r.ctx[c],r.ctx[c]=m)&&(!r.skip_bound&&r.bound[c]&&r.bound[c](m),u&&Wt(t,c)),d}):[],r.update(),u=!0,Y(r.before_update),r.fragment=l?l(r.ctx):!1,e.target){if(e.hydrate){const c=Bt(e.target);r.fragment&&r.fragment.l(c),c.forEach(F)}else r.fragment&&r.fragment.c();e.intro&&S(t.$$.fragment),H(t,e.target,e.anchor),Tt()}be(f)}class se{constructor(){Se(this,"$$");Se(this,"$$set")}$destroy(){V(this,1),this.$destroy=U}$on(e,n){if(!z(n))return U;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(e){this.$$set&&!qt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Gt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Gt);function St(t,e){function n(i){i.relatedTarget instanceof Node&&!t.contains(i.relatedTarget)&&e()}function l(i){i.target instanceof Node&&!t.contains(i.target)&&e()}return document.addEventListener("mousedown",l,{capture:!0,passive:!0}),t.addEventListener("focusout",n),{update(i){e=i},destroy(){document.removeEventListener("mousedown",l,{capture:!0}),t.removeEventListener("focusout",n)}}}function Yt(t,e){const n=i=>{i.stopPropagation(),i.preventDefault()},l=i=>{i?(t.classList.add("local-satsmail-busy"),t.addEventListener("keydown",n,{capture:!0})):(t.classList.remove("local-satsmail-busy"),t.removeEventListener("keydown",n,{capture:!0}))};return l(e),{update:l,destroy(){l(!1)}}}function He(){return window.M.cfg.wwwroot+"/local/satsmail/"}function Un(t,e=[],n){const l=new URL(He()+"create.php");return t&&l.searchParams.set("course",String(t)),e.length&&l.searchParams.set("recipients",e.join(",")),n&&l.searchParams.set("role",n),l.searchParams.set("sesskey",window.M.cfg.sesskey),l.toString()}function zn(t){const e=new URL(He()+"download.php");return e.searchParams.set("m",String(t)),e.toString()}function Hn(){const t=new URL(window.location.href),e={tray:t.searchParams.get("t")||void 0,courseid:parseInt(t.searchParams.get("c")||"")||void 0,labelid:parseInt(t.searchParams.get("l")||"")||void 0,messageid:parseInt(t.searchParams.get("m")||"")||void 0,offset:parseInt(t.searchParams.get("o")||"")||void 0,dialog:t.searchParams.get("d")||void 0},n={content:t.searchParams.get("s")||void 0,sendername:t.searchParams.get("sf")||void 0,recipientname:t.searchParams.get("st")||void 0,unread:t.searchParams.get("su")=="1"||void 0,withfilesonly:t.searchParams.get("sa")=="1"||void 0,maxtime:parseInt(t.searchParams.get("sd")||"")||void 0,startid:parseInt(t.searchParams.get("ss")||"")||void 0,reverse:t.searchParams.get("sr")=="1"||void 0};return Object.values(n).some(l=>l!=null)?{...e,search:n}:e}function Vn(t,e){const n=new URL(Te(t));n.search!=window.location.search&&(e?window.history.replaceState(void 0,"",n.toString()):window.history.pushState(void 0,"",n.toString()))}function Te(t){var n,l,i,a,s,o,f,r;const e=new URL(He()+"view.php");return t.tray&&e.searchParams.set("t",t.tray),t.courseid&&e.searchParams.set("c",String(t.courseid)),t.tray=="label"&&t.labelid&&e.searchParams.set("l",String(t.labelid)),t.messageid&&e.searchParams.set("m",String(t.messageid)),t.offset&&e.searchParams.set("o",String(t.offset)),(n=t.search)!=null&&n.content&&e.searchParams.set("s",t.search.content),(l=t.search)!=null&&l.sendername&&e.searchParams.set("sf",t.search.sendername),(i=t.search)!=null&&i.recipientname&&e.searchParams.set("st",t.search.recipientname),(a=t.search)!=null&&a.unread&&e.searchParams.set("su","1"),(s=t.search)!=null&&s.withfilesonly&&e.searchParams.set("sa","1"),(o=t.search)!=null&&o.maxtime&&e.searchParams.set("sd",String(t.search.maxtime)),(f=t.search)!=null&&f.startid&&e.searchParams.set("ss",String(t.search.startid)),(r=t.search)!=null&&r.reverse&&e.searchParams.set("sr","1"),t.dialog&&e.searchParams.set("d",t.dialog),e.toString()}const Kn=["","blue","indigo","purple","pink","red","orange","yellow","green","teal","cyan"];function Ye(t){const e=document.createElement("DIV");return e.innerHTML=t,e.innerText||""}function Wn(t){if(t==0)return"";const e=new Date(t*1e3);return[String(e.getFullYear()),String(e.getMonth()+1).padStart(2,"0"),String(e.getDate()).padStart(2,"0")].join("-")}function ke(t,e){return t?e=="shortname"?Ye(t.shortname):Ye(t.fullname):""}function ge(t){return new Intl.NumberFormat(window.M.str.langconfig.localecldr).format(t)}function Gn(t){const e=[{bytes:1099511627776,name:"TB"},{bytes:1073741824,name:"GB"},{bytes:1048576,name:"MB"},{bytes:1024,name:"KB"}];for(const n of e)if(t>=n.bytes)return`${Intl.NumberFormat(void 0,{maximumFractionDigits:1}).format(t/n.bytes)} ${n.name}`;return`${t} B`}function Yn(t){return t.trim().replaceAll(/\s+/gu," ")}function Jn(t,e){if(t=t||"",typeof e=="string"||typeof e=="number")t=t.replace("{$a}",e.toString());else for(const n in e)t=t.replace(`{$a->${n}}`,e[n].toString());return t}function Qn(t){return t?Math.floor(new Date(parseInt(t.slice(0,4)),parseInt(t.slice(5,7))-1,parseInt(t.slice(8,10)),23,59,59).getTime()/1e3):0}function Jt(t){let e,n,l,i,a=t[0].compose+"",s,o,f,r;return{c(){e=A("button"),n=A("i"),l=O(),i=A("span"),s=X(a),g(n,"class","fa fa-edit mr-0 mr-sm-1"),D(i,"d-none",t[1]),g(e,"type","button"),g(e,"class","btn btn-primary text-truncate px-2 px-sm-3"),g(e,"aria-label",o=t[0].compose),D(e,"flex-shrink-0",t[1])},m(u,c){j(u,e,c),L(e,n),L(e,l),L(e,i),L(i,s),f||(r=W(e,"click",function(){z(t[2])&&t[2].apply(this,arguments)}),f=!0)},p(u,[c]){t=u,c&1&&a!==(a=t[0].compose+"")&&$(s,a),c&2&&D(i,"d-none",t[1]),c&1&&o!==(o=t[0].compose)&&g(e,"aria-label",o),c&2&&D(e,"flex-shrink-0",t[1])},i:U,o:U,d(u){u&&F(e),f=!1,r()}}}function Qt(t,e,n){let{strings:l}=e,{iconOnly:i=!1}=e,{onClick:a}=e;return t.$$set=s=>{"strings"in s&&n(0,l=s.strings),"iconOnly"in s&&n(1,i=s.iconOnly),"onClick"in s&&n(2,a=s.onClick)},[l,i,a]}class Xt extends se{constructor(e){super(),ie(this,e,Qt,Jt,le,{strings:0,iconOnly:1,onClick:2})}}function Ve(t,e){function n(){t.offsetWidth<t.scrollWidth?t.setAttribute("title",e):t.removeAttribute("title")}return t.style.overflow="hidden",t.style.textOverflow="ellipsis",t.style.whiteSpace="nowrap",t.addEventListener("mouseenter",n),{update(l){e=l},destroy(){t.removeEventListener("mouseenter",n,!0)}}}const Zt=t=>({}),Je=t=>({});function xt(t){let e,n,l,i,a,s;return{c(){e=A("div"),n=X(t[10]),g(e,"class",l="local-satsmail-combo-box-readonly form-control "+t[11]+" svelte-2rfqsk"),D(e,"local-satsmail-combo-box-readonly-default",t[11]=="")},m(o,f){j(o,e,f),L(e,n),a||(s=me(i=Ve.call(null,e,t[10])),a=!0)},p(o,f){f&1024&&$(n,o[10]),f&2048&&l!==(l="local-satsmail-combo-box-readonly form-control "+o[11]+" svelte-2rfqsk")&&g(e,"class",l),i&&z(i.update)&&f&1024&&i.update.call(null,o[10]),f&2048&&D(e,"local-satsmail-combo-box-readonly-default",o[11]=="")},i:U,o:U,d(o){o&&F(e),a=!1,s()}}}function $t(t){let e,n,l,i,a,s;const o=t[25].buttonContent,f=_t(o,t,t[24],Je),r=f||tn(t);return{c(){e=A("button"),r&&r.c(),g(e,"type","button"),g(e,"class",n="local-satsmail-combo-box-button form-control btn "+t[9]+" svelte-2rfqsk"),D(e,"local-satsmail-combo-box-button-default",t[9]==""),D(e,"local-satsmail-combo-box-padding-for-one-icon",t[4]&&!t[6]),D(e,"local-satsmail-combo-box-padding-for-two-icons",t[6])},m(u,c){j(u,e,c),r&&r.m(e,null),i=!0,a||(s=[me(l=Ve.call(null,e,t[8])),W(e,"click",function(){z(t[18])&&t[18].apply(this,arguments)})],a=!0)},p(u,c){t=u,f?f.p&&(!i||c&16777216)&&wt(f,o,t,t[24],i?kt(o,t[24],c,Zt):Ct(t[24]),Je):r&&r.p&&(!i||c&256)&&r.p(t,i?c:-1),(!i||c&512&&n!==(n="local-satsmail-combo-box-button form-control btn "+t[9]+" svelte-2rfqsk"))&&g(e,"class",n),l&&z(l.update)&&c&256&&l.update.call(null,t[8]),(!i||c&512)&&D(e,"local-satsmail-combo-box-button-default",t[9]==""),(!i||c&592)&&D(e,"local-satsmail-combo-box-padding-for-one-icon",t[4]&&!t[6]),(!i||c&576)&&D(e,"local-satsmail-combo-box-padding-for-two-icons",t[6])},i(u){i||(S(r,u),i=!0)},o(u){N(r,u),i=!1},d(u){u&&F(e),r&&r.d(u),a=!1,Y(s)}}}function en(t){let e,n,l;return{c(){e=A("input"),g(e,"type","text"),g(e,"class","local-satsmail-combo-box-input form-control svelte-2rfqsk"),g(e,"placeholder",t[2]),g(e,"aria-label",t[2]),D(e,"local-satsmail-combo-box-padding-for-one-icon",t[4]||t[6]),D(e,"local-satsmail-combo-box-padding-for-two-icons",t[4]&&t[6]),D(e,"is-invalid",t[12])},m(i,a){j(i,e,a),t[26](e),Ge(e,t[0]),n||(l=[W(e,"input",t[27]),W(e,"focus",function(){z(t[13])&&t[13].apply(this,arguments)}),W(e,"input",t[28]),W(e,"keyup",t[21])],n=!0)},p(i,a){t=i,a&4&&g(e,"placeholder",t[2]),a&4&&g(e,"aria-label",t[2]),a&1&&e.value!==t[0]&&Ge(e,t[0]),a&80&&D(e,"local-satsmail-combo-box-padding-for-one-icon",t[4]||t[6]),a&80&&D(e,"local-satsmail-combo-box-padding-for-two-icons",t[4]&&t[6]),a&4096&&D(e,"is-invalid",t[12])},i:U,o:U,d(i){i&&F(e),t[26](null),n=!1,Y(l)}}}function tn(t){let e;return{c(){e=X(t[8])},m(n,l){j(n,e,l)},p(n,l){l&256&&$(e,n[8])},d(n){n&&F(e)}}}function Qe(t){let e,n,l,i,a;return{c(){e=A("button"),n=A("i"),g(n,"class",l="fa fa-fw "+t[6]+" svelte-2rfqsk"),g(n,"aria-hidden","true"),g(e,"type","button"),g(e,"class","local-satsmail-combo-box-middle-icon btn svelte-2rfqsk"),g(e,"title",t[7])},m(s,o){j(s,e,o),L(e,n),i||(a=W(e,"click",function(){z(t[17])&&t[17].apply(this,arguments)}),i=!0)},p(s,o){t=s,o&64&&l!==(l="fa fa-fw "+t[6]+" svelte-2rfqsk")&&g(n,"class",l),o&128&&g(e,"title",t[7])},d(s){s&&F(e),i=!1,a()}}}function Xe(t){let e,n,l,i,a;return{c(){e=A("button"),n=A("i"),g(n,"class",l="fa fa-fw "+t[4]+" svelte-2rfqsk"),g(n,"aria-hidden","true"),g(e,"type","button"),g(e,"class","local-satsmail-combo-box-right-icon btn svelte-2rfqsk"),g(e,"title",t[5])},m(s,o){j(s,e,o),L(e,n),i||(a=W(e,"click",function(){z(t[16])&&t[16].apply(this,arguments)}),i=!0)},p(s,o){t=s,o&16&&l!==(l="fa fa-fw "+t[4]+" svelte-2rfqsk")&&g(n,"class",l),o&32&&g(e,"title",t[5])},d(s){s&&F(e),i=!1,a()}}}function nn(t){let e,n,l,i,a,s,o,f,r,u,c,d,v,m;const h=[en,$t,xt],_=[];function T(y,I){return y[1]=="input"?0:y[1]=="button"?1:2}n=T(t),l=_[n]=h[n](t);let P=t[6]&&Qe(t),w=t[4]&&Xe(t);const q=t[25].default,b=_t(q,t,t[24],null);return{c(){e=A("div"),l.c(),i=O(),a=A("div"),s=A("i"),f=O(),P&&P.c(),r=O(),w&&w.c(),u=O(),b&&b.c(),g(s,"class",o="fa fa-fw "+t[3]+" svelte-2rfqsk"),g(s,"aria-hidden","true"),g(a,"class","local-satsmail-combo-box-left-icon svelte-2rfqsk"),g(e,"class","local-satsmail-combo-box svelte-2rfqsk")},m(y,I){j(y,e,I),_[n].m(e,null),L(e,i),L(e,a),L(a,s),L(e,f),P&&P.m(e,null),L(e,r),w&&w.m(e,null),L(e,u),b&&b.m(e,null),t[29](e),d=!0,v||(m=me(c=St.call(null,e,t[30])),v=!0)},p(y,[I]){let E=n;n=T(y),n===E?_[n].p(y,I):(J(),N(_[E],1,1,()=>{_[E]=null}),Q(),l=_[n],l?l.p(y,I):(l=_[n]=h[n](y),l.c()),S(l,1),l.m(e,i)),(!d||I&8&&o!==(o="fa fa-fw "+y[3]+" svelte-2rfqsk"))&&g(s,"class",o),y[6]?P?P.p(y,I):(P=Qe(y),P.c(),P.m(e,r)):P&&(P.d(1),P=null),y[4]?w?w.p(y,I):(w=Xe(y),w.c(),w.m(e,u)):w&&(w.d(1),w=null),b&&b.p&&(!d||I&16777216)&&wt(b,q,y,y[24],d?kt(q,y[24],I,null):Ct(y[24]),null),c&&z(c.update)&&I&16384&&c.update.call(null,y[30])},i(y){d||(S(l),S(b,y),d=!0)},o(y){N(l),N(b,y),d=!1},d(y){y&&F(e),_[n].d(),P&&P.d(),w&&w.d(),b&&b.d(y),t[29](null),v=!1,m()}}}function ln(t,e,n){let{$$slots:l={},$$scope:i}=e,{mode:a="input"}=e,{inputText:s}=e,{inputPlaceholder:o}=e,{leftIconClass:f}=e,{rightIconClass:r=""}=e,{rightIconLabel:u=""}=e,{middleIconClass:c=""}=e,{middleIconLabel:d=""}=e,{buttonText:v=""}=e,{buttonClass:m=""}=e,{readonlyText:h=""}=e,{readonlyClass:_=""}=e,{invalid:T=!1}=e,{onFocus:P=null}=e,{onBlur:w=null}=e,{onInput:q=null}=e,{onEnter:b=null}=e,{onRightIconClick:y=null}=e,{onMiddleIconClick:I=null}=e,{onButtonClick:E=null}=e;const B=async()=>{await Ot(),K.focus()};let R,K;const ae=k=>{k.key=="Enter"?b==null||b():k.key=="Escape"&&(K.blur(),w==null||w())};function x(k){de[k?"unshift":"push"](()=>{K=k,n(20,K)})}function M(){s=this.value,n(0,s)}const ee=()=>q==null?void 0:q(s);function C(k){de[k?"unshift":"push"](()=>{R=k,n(19,R)})}const p=()=>w==null?void 0:w();return t.$$set=k=>{"mode"in k&&n(1,a=k.mode),"inputText"in k&&n(0,s=k.inputText),"inputPlaceholder"in k&&n(2,o=k.inputPlaceholder),"leftIconClass"in k&&n(3,f=k.leftIconClass),"rightIconClass"in k&&n(4,r=k.rightIconClass),"rightIconLabel"in k&&n(5,u=k.rightIconLabel),"middleIconClass"in k&&n(6,c=k.middleIconClass),"middleIconLabel"in k&&n(7,d=k.middleIconLabel),"buttonText"in k&&n(8,v=k.buttonText),"buttonClass"in k&&n(9,m=k.buttonClass),"readonlyText"in k&&n(10,h=k.readonlyText),"readonlyClass"in k&&n(11,_=k.readonlyClass),"invalid"in k&&n(12,T=k.invalid),"onFocus"in k&&n(13,P=k.onFocus),"onBlur"in k&&n(14,w=k.onBlur),"onInput"in k&&n(15,q=k.onInput),"onEnter"in k&&n(22,b=k.onEnter),"onRightIconClick"in k&&n(16,y=k.onRightIconClick),"onMiddleIconClick"in k&&n(17,I=k.onMiddleIconClick),"onButtonClick"in k&&n(18,E=k.onButtonClick),"$$scope"in k&&n(24,i=k.$$scope)},[s,a,o,f,r,u,c,d,v,m,h,_,T,P,w,q,y,I,E,R,K,ae,b,B,i,l,x,M,ee,C,p]}class sn extends se{constructor(e){super(),ie(this,e,ln,nn,le,{mode:1,inputText:0,inputPlaceholder:2,leftIconClass:3,rightIconClass:4,rightIconLabel:5,middleIconClass:6,middleIconLabel:7,buttonText:8,buttonClass:9,readonlyText:10,readonlyClass:11,invalid:12,onFocus:13,onBlur:14,onInput:15,onEnter:22,onRightIconClick:16,onMiddleIconClick:17,onButtonClick:18,focus:23})}get focus(){return this.$$.ctx[23]}}function Ze(t,e,n){const l=t.slice();return l[27]=e[n],l}function xe(t){let e,n=t[0].allcourses+"",l,i,a,s,o;return{c(){e=A("button"),l=X(n),i=O(),a=A("div"),g(e,"type","button"),g(e,"class","dropdown-item text-truncate"),g(a,"class","dropdown-divider")},m(f,r){j(f,e,r),L(e,l),j(f,i,r),j(f,a,r),s||(o=W(e,"click",t[22]),s=!0)},p(f,r){r&1&&n!==(n=f[0].allcourses+"")&&$(l,n)},d(f){f&&(F(e),F(i),F(a)),s=!1,o()}}}function $e(t){let e,n=t[0].nocoursematchestext+"",l,i;return{c(){e=A("div"),l=X(n),i=O(),g(e,"class","px-4 text-danger")},m(a,s){j(a,e,s),L(e,l),L(e,i)},p(a,s){s&1&&n!==(n=a[0].nocoursematchestext+"")&&$(l,n)},d(a){a&&F(e)}}}function et(t){let e,n=ge(t[27].unread)+"",l;return{c(){e=A("span"),l=X(n),g(e,"class","local-satsmail-select-course-badge svelte-fpg25e")},m(i,a){j(i,e,a),L(e,l)},p(i,a){a&1024&&n!==(n=ge(i[27].unread)+"")&&$(l,n)},d(i){i&&F(e)}}}function tt(t,e){let n,l,i=e[9](e[27])+"",a,s,o,f,r=e[27].unread>0&&et(e);function u(){return e[23](e[27])}return{key:t,first:null,c(){n=A("button"),l=A("span"),a=O(),r&&r.c(),s=O(),g(l,"class","text-truncate"),g(n,"type","button"),g(n,"class","local-satsmail-select-course-item dropdown-item d-flex align-items-center svelte-fpg25e"),this.first=n},m(c,d){j(c,n,d),L(n,l),l.innerHTML=i,L(n,a),r&&r.m(n,null),L(n,s),o||(f=W(n,"click",u),o=!0)},p(c,d){e=c,d&1536&&i!==(i=e[9](e[27])+"")&&(l.innerHTML=i),e[27].unread>0?r?r.p(e,d):(r=et(e),r.c(),r.m(n,s)):r&&(r.d(1),r=null)},d(c){c&&F(n),r&&r.d(),o=!1,f()}}}function an(t){let e,n,l=[],i=new Map,a,s=!t[2]&&xe(t),o=fe(t[10]);const f=u=>u[27].id;for(let u=0;u<o.length;u+=1){let c=Ze(t,o,u),d=f(c);i.set(d,l[u]=tt(d,c))}let r=null;return o.length||(r=$e(t)),{c(){e=A("div"),s&&s.c(),n=O();for(let u=0;u<l.length;u+=1)l[u].c();r&&r.c(),g(e,"class",a="dropdown-menu dropdown-menu-"+t[5]+" svelte-fpg25e"),D(e,"show",t[8])},m(u,c){j(u,e,c),s&&s.m(e,null),L(e,n);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(e,null);r&&r.m(e,null)},p(u,c){u[2]?s&&(s.d(1),s=null):s?s.p(u,c):(s=xe(u),s.c(),s.m(e,n)),c&34305&&(o=fe(u[10]),l=Be(l,c,f,1,u,o,i,e,Vt,tt,null,Ze),!o.length&&r?r.p(u,c):o.length?r&&(r.d(1),r=null):(r=$e(u),r.c(),r.m(e,null))),c&32&&a!==(a="dropdown-menu dropdown-menu-"+u[5]+" svelte-fpg25e")&&g(e,"class",a),c&288&&D(e,"show",u[8])},d(u){u&&F(e),s&&s.d();for(let c=0;c<l.length;c+=1)l[c].d();r&&r.d()}}}function on(t){let e,n,l;function i(s){t[25](s)}let a={mode:t[3]?"readonly":t[8]?"input":"button",inputPlaceholder:t[0].course,leftIconClass:"fa-graduation-cap",rightIconClass:t[3]?"":t[8]?t[6]?"fa-times":"fa-caret-up":"fa-caret-down",rightIconLabel:t[8]&&t[6]?t[0].clearsearch:t[0].changecourse,buttonText:t[11]||t[1],buttonClass:t[4],readonlyText:t[11]||t[1],readonlyClass:"alert-secondary",onBlur:t[13],onButtonClick:t[12],onRightIconClick:t[8]?t[13]:t[12],$$slots:{default:[an]},$$scope:{ctx:t}};return t[6]!==void 0&&(a.inputText=t[6]),e=new sn({props:a}),t[24](e),de.push(()=>Kt(e,"inputText",i)),{c(){G(e.$$.fragment)},m(s,o){H(e,s,o),l=!0},p(s,[o]){const f={};o&264&&(f.mode=s[3]?"readonly":s[8]?"input":"button"),o&1&&(f.inputPlaceholder=s[0].course),o&328&&(f.rightIconClass=s[3]?"":s[8]?s[6]?"fa-times":"fa-caret-up":"fa-caret-down"),o&321&&(f.rightIconLabel=s[8]&&s[6]?s[0].clearsearch:s[0].changecourse),o&2050&&(f.buttonText=s[11]||s[1]),o&16&&(f.buttonClass=s[4]),o&2050&&(f.readonlyText=s[11]||s[1]),o&256&&(f.onRightIconClick=s[8]?s[13]:s[12]),o&1073743653&&(f.$$scope={dirty:o,ctx:s}),!n&&o&64&&(n=!0,f.inputText=s[6],Ut(()=>n=!1)),e.$set(f)},i(s){l||(S(e.$$.fragment,s),l=!0)},o(s){N(e.$$.fragment,s),l=!1},d(s){t[24](null),V(e,s)}}}function rn(t,e,n){let l,i,a,s,{settings:o}=e,{strings:f}=e,{courses:r}=e,{label:u}=e,{selected:c}=e,{required:d=!1}=e,{readonly:v=!1}=e,{buttonClass:m=""}=e,{dropdownAlign:h="left"}=e,{onChange:_}=e,T,P,w=!1,q="";const b=M=>M.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&"),y=()=>{n(6,q=""),n(8,w=!0),T.focus()},I=()=>{n(8,w=!1),n(6,q="")},E=async()=>{await _(),n(16,c=void 0),I()},B=async M=>{await _(M.id),n(16,c=M.id),I()},R=()=>E(),K=M=>B(M);function ae(M){de[M?"unshift":"push"](()=>{T=M,n(7,T)})}function x(M){q=M,n(6,q)}return t.$$set=M=>{"settings"in M&&n(17,o=M.settings),"strings"in M&&n(0,f=M.strings),"courses"in M&&n(18,r=M.courses),"label"in M&&n(1,u=M.label),"selected"in M&&n(16,c=M.selected),"required"in M&&n(2,d=M.required),"readonly"in M&&n(3,v=M.readonly),"buttonClass"in M&&n(4,m=M.buttonClass),"dropdownAlign"in M&&n(5,h=M.dropdownAlign),"onChange"in M&&n(19,_=M.onChange)},t.$$.update=()=>{t.$$.dirty&327680&&n(20,P=r.find(M=>M.id==c)),t.$$.dirty&1179648&&n(11,l=ke(P,o.filterbycourse)),t.$$.dirty&64&&n(21,i=new RegExp(b(q.trim()).replaceAll(/\s+/gu,"\\s+"),"giu")),t.$$.dirty&2490368&&n(10,a=r.filter(M=>ke(M,o.filterbycourse).match(i))),t.$$.dirty&2228224&&n(9,s=M=>ke(M,o.filterbycourse).replaceAll(i,ee=>ee.trim()?"<mark>"+ee+"</mark>":ee))},[f,u,d,v,m,h,q,T,w,s,a,l,y,I,E,B,c,o,r,_,P,i,R,K,ae,x]}class fn extends se{constructor(e){super(),ie(this,e,rn,on,le,{settings:17,strings:0,courses:18,label:1,selected:16,required:2,readonly:3,buttonClass:4,dropdownAlign:5,onChange:19})}}function nt(t){let e,n=ge(t[3])+"",l;return{c(){e=A("span"),l=X(n),g(e,"class","badge text-dark")},m(i,a){j(i,e,a),L(e,l)},p(i,a){a&8&&n!==(n=ge(i[3])+"")&&$(l,n)},d(i){i&&F(e)}}}function un(t){let e,n,l,i,a,s,o,f,r,u,c,d,v,m=t[3]>0&&nt(t);return{c(){e=A("a"),n=A("i"),a=O(),s=A("span"),o=X(t[1]),r=O(),m&&m.c(),g(n,"class",l="fa "+t[0]+" fa-fw svelte-1ajavlr"),g(n,"aria-hidden","true"),g(n,"style",i=t[6]&&!t[5]?`color: var(--local-satsmail-color-${t[6]}-bg)`:""),g(s,"class","flex-fill px-2"),g(e,"class","local-satsmail-menu-item list-group-item list-group-item-action d-flex align-items-center px-3 py-2 svelte-1ajavlr"),g(e,"aria-current",t[5]),g(e,"aria-disabled",t[4]),g(e,"role","tab"),g(e,"href",u=Te(t[2])),g(e,"style",c=t[6]&&!t[5]?`color: var(--local-satsmail-color-${t[6]}-fg)`:""),D(e,"list-group-item-primary",t[5]),D(e,"disabled",t[4])},m(h,_){j(h,e,_),L(e,n),L(e,a),L(e,s),L(s,o),L(e,r),m&&m.m(e,null),d||(v=[me(f=Ve.call(null,s,t[1])),W(e,"click",t[7])],d=!0)},p(h,[_]){_&1&&l!==(l="fa "+h[0]+" fa-fw svelte-1ajavlr")&&g(n,"class",l),_&96&&i!==(i=h[6]&&!h[5]?`color: var(--local-satsmail-color-${h[6]}-bg)`:"")&&g(n,"style",i),_&2&&$(o,h[1]),f&&z(f.update)&&_&2&&f.update.call(null,h[1]),h[3]>0?m?m.p(h,_):(m=nt(h),m.c(),m.m(e,null)):m&&(m.d(1),m=null),_&32&&g(e,"aria-current",h[5]),_&16&&g(e,"aria-disabled",h[4]),_&4&&u!==(u=Te(h[2]))&&g(e,"href",u),_&96&&c!==(c=h[6]&&!h[5]?`color: var(--local-satsmail-color-${h[6]}-fg)`:"")&&g(e,"style",c),_&32&&D(e,"list-group-item-primary",h[5]),_&16&&D(e,"disabled",h[4])},i:U,o:U,d(h){h&&F(e),m&&m.d(),d=!1,Y(v)}}}function cn(t,e,n){let{icon:l}=e,{text:i}=e,{params:a}=e,{count:s=0}=e,{disabled:o=!1}=e,{active:f=!1}=e,{color:r=void 0}=e,{onClick:u=void 0}=e;const c=d=>{u&&(d.preventDefault(),u(a))};return t.$$set=d=>{"icon"in d&&n(0,l=d.icon),"text"in d&&n(1,i=d.text),"params"in d&&n(2,a=d.params),"count"in d&&n(3,s=d.count),"disabled"in d&&n(4,o=d.disabled),"active"in d&&n(5,f=d.active),"color"in d&&n(6,r=d.color),"onClick"in d&&n(8,u=d.onClick)},[l,i,a,s,o,f,r,c,u]}class te extends se{constructor(e){super(),ie(this,e,cn,un,le,{icon:0,text:1,params:2,count:3,disabled:4,active:5,color:6,onClick:8})}}function lt(t,e,n){const l=t.slice();return l[18]=e[n],l}function it(t,e,n){const l=t.slice();return l[21]=e[n],l}function st(t){let e,n;return e=new fn({props:{settings:t[0],strings:t[1],courses:t[2],label:t[1].allcourses,selected:t[4].courseid,buttonClass:"btn-secondary",onChange:t[7]}}),{c(){G(e.$$.fragment)},m(l,i){H(e,l,i),n=!0},p(l,i){const a={};i&1&&(a.settings=l[0]),i&2&&(a.strings=l[1]),i&4&&(a.courses=l[2]),i&2&&(a.label=l[1].allcourses),i&16&&(a.selected=l[4].courseid),i&128&&(a.onChange=l[7]),e.$set(a)},i(l){n||(S(e.$$.fragment,l),n=!0)},o(l){N(e.$$.fragment,l),n=!1},d(l){V(e,l)}}}function at(t){let e,n;return e=new te({props:{icon:"fa-star",text:t[1].starredplural,params:{tray:"starred",courseid:t[10],search:t[9]},active:t[4].tray=="starred",onClick:t[6]}}),{c(){G(e.$$.fragment)},m(l,i){H(e,l,i),n=!0},p(l,i){const a={};i&2&&(a.text=l[1].starredplural),i&1536&&(a.params={tray:"starred",courseid:l[10],search:l[9]}),i&16&&(a.active=l[4].tray=="starred"),i&64&&(a.onClick=l[6]),e.$set(a)},i(l){n||(S(e.$$.fragment,l),n=!0)},o(l){N(e.$$.fragment,l),n=!1},d(l){V(e,l)}}}function ot(t){let e,n;return e=new te({props:{icon:"fa-paper-plane",text:t[1].sentplural,params:{tray:"sent",courseid:t[10],search:t[9]},active:t[4].tray=="sent",onClick:t[6]}}),{c(){G(e.$$.fragment)},m(l,i){H(e,l,i),n=!0},p(l,i){const a={};i&2&&(a.text=l[1].sentplural),i&1536&&(a.params={tray:"sent",courseid:l[10],search:l[9]}),i&16&&(a.active=l[4].tray=="sent"),i&64&&(a.onClick=l[6]),e.$set(a)},i(l){n||(S(e.$$.fragment,l),n=!0)},o(l){N(e.$$.fragment,l),n=!1},d(l){V(e,l)}}}function rt(t){var l;let e,n;return e=new te({props:{icon:"fa-file",text:t[1].drafts,count:t[10]?(l=t[2].find(t[16]))==null?void 0:l.drafts:t[13],params:{tray:"drafts",courseid:t[10],search:t[9]},active:t[4].tray=="drafts",onClick:t[6]}}),{c(){G(e.$$.fragment)},m(i,a){H(e,i,a),n=!0},p(i,a){var o;const s={};a&2&&(s.text=i[1].drafts),a&9220&&(s.count=i[10]?(o=i[2].find(i[16]))==null?void 0:o.drafts:i[13]),a&1536&&(s.params={tray:"drafts",courseid:i[10],search:i[9]}),a&16&&(s.active=i[4].tray=="drafts"),a&64&&(s.onClick=i[6]),e.$set(s)},i(i){n||(S(e.$$.fragment,i),n=!0)},o(i){N(e.$$.fragment,i),n=!1},d(i){V(e,i)}}}function ft(t){let e,n;return e=new te({props:{icon:"fa-archive",text:t[1].archived,params:{tray:"archive",courseid:t[10],search:t[9]},active:t[4].tray=="archive",onClick:t[6]}}),{c(){G(e.$$.fragment)},m(l,i){H(e,l,i),n=!0},p(l,i){const a={};i&2&&(a.text=l[1].archived),i&1536&&(a.params={tray:"archive",courseid:l[10],search:l[9]}),i&16&&(a.active=l[4].tray=="archive"),i&64&&(a.onClick=l[6]),e.$set(a)},i(l){n||(S(e.$$.fragment,l),n=!0)},o(l){N(e.$$.fragment,l),n=!1},d(l){V(e,l)}}}function ut(t){let e,n;return e=new te({props:{icon:"fa-trash",text:t[1].trash,params:{tray:"trash",courseid:t[10],search:t[9]},active:t[4].tray=="trash",onClick:t[6]}}),{c(){G(e.$$.fragment)},m(l,i){H(e,l,i),n=!0},p(l,i){const a={};i&2&&(a.text=l[1].trash),i&1536&&(a.params={tray:"trash",courseid:l[10],search:l[9]}),i&16&&(a.active=l[4].tray=="trash"),i&64&&(a.onClick=l[6]),e.$set(a)},i(l){n||(S(e.$$.fragment,l),n=!0)},o(l){N(e.$$.fragment,l),n=!1},d(l){V(e,l)}}}function ct(t,e){var a;let n,l,i;return l=new te({props:{icon:"fa-tag",text:e[21].name,count:e[10]?(a=e[21].courses.find(e[17]))==null?void 0:a.unread:e[21].unread,color:e[21].color,params:{tray:"label",labelid:e[21].id,courseid:e[10],search:e[9]},active:e[4].tray=="label"&&e[4].labelid==e[21].id,onClick:e[6]}}),{key:t,first:null,c(){n=Ee(),G(l.$$.fragment),this.first=n},m(s,o){j(s,n,o),H(l,s,o),i=!0},p(s,o){var r;e=s;const f={};o&8&&(f.text=e[21].name),o&1032&&(f.count=e[10]?(r=e[21].courses.find(e[17]))==null?void 0:r.unread:e[21].unread),o&8&&(f.color=e[21].color),o&1544&&(f.params={tray:"label",labelid:e[21].id,courseid:e[10],search:e[9]}),o&24&&(f.active=e[4].tray=="label"&&e[4].labelid==e[21].id),o&64&&(f.onClick=e[6]),l.$set(f)},i(s){i||(S(l.$$.fragment,s),i=!0)},o(s){N(l.$$.fragment,s),i=!1},d(s){s&&F(n),V(l,s)}}}function mt(t){let e,n;return e=new te({props:{icon:"fa-graduation-cap",text:ke(t[18],t[0].coursetraysname),count:t[18].unread,params:t[8]?{tray:"inbox",courseid:t[18].id,search:t[9]}:{tray:"course",courseid:t[18].id,search:t[9]},active:(t[4].tray=="course"||!t[4].tray&&!t[8])&&t[4].courseid==t[18].id,onClick:t[6]}}),{c(){G(e.$$.fragment)},m(l,i){H(e,l,i),n=!0},p(l,i){const a={};i&5&&(a.text=ke(l[18],l[0].coursetraysname)),i&4&&(a.count=l[18].unread),i&772&&(a.params=l[8]?{tray:"inbox",courseid:l[18].id,search:l[9]}:{tray:"course",courseid:l[18].id,search:l[9]}),i&276&&(a.active=(l[4].tray=="course"||!l[4].tray&&!l[8])&&l[4].courseid==l[18].id),i&64&&(a.onClick=l[6]),e.$set(a)},i(l){n||(S(e.$$.fragment,l),n=!0)},o(l){N(e.$$.fragment,l),n=!1},d(l){V(e,l)}}}function dt(t,e){let n,l=e[11](e[18])&&(!e[8]||e[18].id!=e[10]),i,a,s=l&&mt(e);return{key:t,first:null,c(){n=Ee(),s&&s.c(),i=Ee(),this.first=n},m(o,f){j(o,n,f),s&&s.m(o,f),j(o,i,f),a=!0},p(o,f){e=o,f&3332&&(l=e[11](e[18])&&(!e[8]||e[18].id!=e[10])),l?s?(s.p(e,f),f&3332&&S(s,1)):(s=mt(e),s.c(),S(s,1),s.m(i.parentNode,i)):s&&(J(),N(s,1,1,()=>{s=null}),Q())},i(o){a||(S(s),a=!0)},o(o){N(s),a=!1},d(o){o&&(F(n),F(i)),s&&s.d(o)}}}function mn(t){var ee;let e,n,l,i,a=t[12]("starred"),s,o=t[12]("sent"),f,r=t[12]("drafts"),u,c=t[12]("archive"),d,v=t[12]("trash"),m,h=[],_=new Map,T,P=[],w=new Map,q,b=(t[8]||t[10])&&st(t);l=new te({props:{icon:"fa-inbox",text:t[1].inbox,count:t[10]?(ee=t[2].find(t[15]))==null?void 0:ee.unread:t[14],params:{tray:"inbox",courseid:t[10],search:t[9]},active:t[4].tray=="inbox",onClick:t[6]}});let y=a&&at(t),I=o&&ot(t),E=r&&rt(t),B=c&&ft(t),R=v&&ut(t),K=fe(t[3]);const ae=C=>C[21].id;for(let C=0;C<K.length;C+=1){let p=it(t,K,C),k=ae(p);_.set(k,h[C]=ct(k,p))}let x=fe(t[2]);const M=C=>C[18].id;for(let C=0;C<x.length;C+=1){let p=lt(t,x,C),k=M(p);w.set(k,P[C]=dt(k,p))}return{c(){e=A("div"),b&&b.c(),n=O(),G(l.$$.fragment),i=O(),y&&y.c(),s=O(),I&&I.c(),f=O(),E&&E.c(),u=O(),B&&B.c(),d=O(),R&&R.c(),m=O();for(let C=0;C<h.length;C+=1)h[C].c();T=O();for(let C=0;C<P.length;C+=1)P[C].c();g(e,"class","list-group svelte-mu6xzw"),D(e,"local-satsmail-menu-navbar",t[5]),D(e,"list-group-flush",t[5]),D(e,"border-top",t[5])},m(C,p){j(C,e,p),b&&b.m(e,null),L(e,n),H(l,e,null),L(e,i),y&&y.m(e,null),L(e,s),I&&I.m(e,null),L(e,f),E&&E.m(e,null),L(e,u),B&&B.m(e,null),L(e,d),R&&R.m(e,null),L(e,m);for(let k=0;k<h.length;k+=1)h[k]&&h[k].m(e,null);L(e,T);for(let k=0;k<P.length;k+=1)P[k]&&P[k].m(e,null);q=!0},p(C,[p]){var Ke;C[8]||C[10]?b?(b.p(C,p),p&1280&&S(b,1)):(b=st(C),b.c(),S(b,1),b.m(e,n)):b&&(J(),N(b,1,1,()=>{b=null}),Q());const k={};p&2&&(k.text=C[1].inbox),p&17412&&(k.count=C[10]?(Ke=C[2].find(C[15]))==null?void 0:Ke.unread:C[14]),p&1536&&(k.params={tray:"inbox",courseid:C[10],search:C[9]}),p&16&&(k.active=C[4].tray=="inbox"),p&64&&(k.onClick=C[6]),l.$set(k),p&4096&&(a=C[12]("starred")),a?y?(y.p(C,p),p&4096&&S(y,1)):(y=at(C),y.c(),S(y,1),y.m(e,s)):y&&(J(),N(y,1,1,()=>{y=null}),Q()),p&4096&&(o=C[12]("sent")),o?I?(I.p(C,p),p&4096&&S(I,1)):(I=ot(C),I.c(),S(I,1),I.m(e,f)):I&&(J(),N(I,1,1,()=>{I=null}),Q()),p&4096&&(r=C[12]("drafts")),r?E?(E.p(C,p),p&4096&&S(E,1)):(E=rt(C),E.c(),S(E,1),E.m(e,u)):E&&(J(),N(E,1,1,()=>{E=null}),Q()),p&4096&&(c=C[12]("archive")),c?B?(B.p(C,p),p&4096&&S(B,1)):(B=ft(C),B.c(),S(B,1),B.m(e,d)):B&&(J(),N(B,1,1,()=>{B=null}),Q()),p&4096&&(v=C[12]("trash")),v?R?(R.p(C,p),p&4096&&S(R,1)):(R=ut(C),R.c(),S(R,1),R.m(e,m)):R&&(J(),N(R,1,1,()=>{R=null}),Q()),p&1624&&(K=fe(C[3]),J(),h=Be(h,p,ae,1,C,K,_,e,Ae,ct,T,it),Q()),p&3925&&(x=fe(C[2]),J(),P=Be(P,p,M,1,C,x,w,e,Ae,dt,null,lt),Q()),(!q||p&32)&&D(e,"local-satsmail-menu-navbar",C[5]),(!q||p&32)&&D(e,"list-group-flush",C[5]),(!q||p&32)&&D(e,"border-top",C[5])},i(C){if(!q){S(b),S(l.$$.fragment,C),S(y),S(I),S(E),S(B),S(R);for(let p=0;p<K.length;p+=1)S(h[p]);for(let p=0;p<x.length;p+=1)S(P[p]);q=!0}},o(C){N(b),N(l.$$.fragment,C),N(y),N(I),N(E),N(B),N(R);for(let p=0;p<h.length;p+=1)N(h[p]);for(let p=0;p<P.length;p+=1)N(P[p]);q=!1},d(C){C&&F(e),b&&b.d(),V(l),y&&y.d(),I&&I.d(),E&&E.d(),B&&B.d(),R&&R.d();for(let p=0;p<h.length;p+=1)h[p].d();for(let p=0;p<P.length;p+=1)P[p].d()}}}function dn(t,e,n){let l,i,a,s,o,f,r,{settings:u}=e,{strings:c}=e,{courses:d}=e,{labels:v}=e,{params:m}=e,{navbar:h=!1}=e,{onClick:_=void 0}=e,{onCourseChange:T}=e;const P=b=>b.id==f,w=b=>b.id==f,q=b=>b.id==f;return t.$$set=b=>{"settings"in b&&n(0,u=b.settings),"strings"in b&&n(1,c=b.strings),"courses"in b&&n(2,d=b.courses),"labels"in b&&n(3,v=b.labels),"params"in b&&n(4,m=b.params),"navbar"in b&&n(5,h=b.navbar),"onClick"in b&&n(6,_=b.onClick),"onCourseChange"in b&&n(7,T=b.onCourseChange)},t.$$.update=()=>{t.$$.dirty&4&&n(14,l=d.reduce((b,y)=>b+y.unread,0)),t.$$.dirty&4&&n(13,i=d.reduce((b,y)=>b+y.drafts,0)),t.$$.dirty&17&&n(12,a=b=>u.globaltrays.includes(b)||m.tray==b),t.$$.dirty&17&&n(11,s=b=>u.coursetrays=="all"||u.coursetrays=="unread"&&(b.unread||0)>0||m.tray=="course"&&m.courseid==b.id),t.$$.dirty&1&&n(8,o=["shortname","fullname"].includes(u.filterbycourse)),t.$$.dirty&272&&n(10,f=o?m.courseid:void 0),t.$$.dirty&16&&n(9,r=m.search?{content:m.search.content,sendername:m.search.sendername,recipientname:m.search.recipientname,maxtime:m.search.maxtime,unread:m.search.unread,withfilesonly:m.search.withfilesonly}:void 0)},[u,c,d,v,m,h,_,T,o,r,f,s,a,i,l,P,w,q]}class hn extends se{constructor(e){super(),ie(this,e,dn,mn,le,{settings:0,strings:1,courses:2,labels:3,params:4,navbar:5,onClick:6,onCourseChange:7})}}function gn(t){let e,n,l,i,a;return{c(){e=A("button"),n=A("i"),g(n,"class","fa fa-cog"),g(n,"aria-hidden",!0),g(e,"type","button"),g(e,"class","btn btn-secondary text-truncate"),g(e,"title",l=t[0].preferences)},m(s,o){j(s,e,o),L(e,n),i||(a=W(e,"click",function(){z(t[1])&&t[1].apply(this,arguments)}),i=!0)},p(s,[o]){t=s,o&1&&l!==(l=t[0].preferences)&&g(e,"title",l)},i:U,o:U,d(s){s&&F(e),i=!1,a()}}}function _n(t,e,n){let{strings:l}=e,{onClick:i}=e;return t.$$set=a=>{"strings"in a&&n(0,l=a.strings),"onClick"in a&&n(1,i=a.onClick)},[l,i]}class bn extends se{constructor(e){super(),ie(this,e,_n,gn,le,{strings:0,onClick:1})}}function kn(t){let e,n=ge(t[8])+"",l;return{c(){e=A("div"),l=X(n),g(e,"class","local-satsmail-navbar-count count-container svelte-z19i61")},m(i,a){j(i,e,a),L(e,l)},p(i,a){a&256&&n!==(n=ge(i[8])+"")&&$(l,n)},d(i){i&&F(e)}}}function wn(t){let e;return{c(){e=A("div"),e.innerHTML='<i class="fa fa-fw fa-spinner fa-pulse text-primary svelte-z19i61"></i>',g(e,"class","local-satsmail-navbar-spinner position-absolute svelte-z19i61")},m(n,l){j(n,e,l)},p:U,d(n){n&&F(e)}}}function ht(t){let e,n,l,i,a,s,o,f;return l=new Xt({props:{strings:t[1],onClick:t[10]}}),a=new bn({props:{strings:t[1],onClick:t[13]}}),o=new hn({props:{settings:t[0],strings:t[1],courses:t[2],labels:t[3],params:t[4],navbar:!0,onClick:t[12],onCourseChange:t[6]}}),{c(){e=A("div"),n=A("div"),G(l.$$.fragment),i=O(),G(a.$$.fragment),s=O(),G(o.$$.fragment),g(n,"class","d-flex justify-content-between p-2"),g(e,"class","local-satsmail-navbar-popover popover-region-container svelte-z19i61")},m(r,u){j(r,e,u),L(e,n),H(l,n,null),L(n,i),H(a,n,null),L(e,s),H(o,e,null),f=!0},p(r,u){const c={};u&2&&(c.strings=r[1]),l.$set(c);const d={};u&2&&(d.strings=r[1]),a.$set(d);const v={};u&1&&(v.settings=r[0]),u&2&&(v.strings=r[1]),u&4&&(v.courses=r[2]),u&8&&(v.labels=r[3]),u&16&&(v.params=r[4]),u&64&&(v.onCourseChange=r[6]),o.$set(v)},i(r){f||(S(l.$$.fragment,r),S(a.$$.fragment,r),S(o.$$.fragment,r),f=!0)},o(r){N(l.$$.fragment,r),N(a.$$.fragment,r),N(o.$$.fragment,r),f=!1},d(r){r&&F(e),V(l),V(a),V(o)}}}function Cn(t){let e,n,l,i,a,s,o,f,r,u,c;function d(_,T){if(_[5])return wn;if(_[8]>0)return kn}let v=d(t),m=v&&v(t),h=t[7]&&ht(t);return{c(){e=A("div"),n=A("a"),l=A("i"),a=O(),m&&m.c(),o=O(),h&&h.c(),g(l,"class","fa fa-fw fa-envelope-o icon m-0"),g(l,"aria-label",i=t[1].plugginname),g(n,"aria-expanded",t[7]),g(n,"class","nav-link btn h-100 position-relative d-flex align-items-center px-2 py-0 rounded-0"),g(n,"href",Te({tray:"inbox"})),g(n,"title",s=t[1].pluginname),g(e,"class","local-satsmail local-satsmail-navbar pop-over-region h-100 svelte-z19i61"),D(e,"popover-region-toggle",t[7])},m(_,T){j(_,e,T),L(e,n),L(n,l),L(n,a),m&&m.m(n,null),L(e,o),h&&h.m(e,null),r=!0,u||(c=[W(n,"click",t[11]),me(St.call(null,e,t[9])),me(f=Yt.call(null,e,t[5]))],u=!0)},p(_,[T]){(!r||T&2&&i!==(i=_[1].plugginname))&&g(l,"aria-label",i),v===(v=d(_))&&m?m.p(_,T):(m&&m.d(1),m=v&&v(_),m&&(m.c(),m.m(n,null))),(!r||T&128)&&g(n,"aria-expanded",_[7]),(!r||T&2&&s!==(s=_[1].pluginname))&&g(n,"title",s),_[7]?h?(h.p(_,T),T&128&&S(h,1)):(h=ht(_),h.c(),S(h,1),h.m(e,null)):h&&(J(),N(h,1,1,()=>{h=null}),Q()),f&&z(f.update)&&T&32&&f.update.call(null,_[5]),(!r||T&128)&&D(e,"popover-region-toggle",_[7])},i(_){r||(S(h),r=!0)},o(_){N(h),r=!1},d(_){_&&F(e),m&&m.d(),h&&h.d(),u=!1,Y(c)}}}function vn(t,e,n){let l,{settings:i}=e,{strings:a}=e,{courses:s}=e,{labels:o}=e,{params:f}=e,{loading:r}=e,{onClick:u}=e,{onComposeClick:c}=e,{onCourseChange:d}=e,v=!1;const m=()=>{n(7,v=!1)},h=()=>{m(),c(f.courseid)},_=w=>{w.preventDefault(),i.globaltrays.length>0||o.length>0?n(7,v=!v):u({tray:"inbox"})},T=w=>{m(),u(w)},P=()=>{m(),u({...f,dialog:"preferences"})};return t.$$set=w=>{"settings"in w&&n(0,i=w.settings),"strings"in w&&n(1,a=w.strings),"courses"in w&&n(2,s=w.courses),"labels"in w&&n(3,o=w.labels),"params"in w&&n(4,f=w.params),"loading"in w&&n(5,r=w.loading),"onClick"in w&&n(14,u=w.onClick),"onComposeClick"in w&&n(15,c=w.onComposeClick),"onCourseChange"in w&&n(6,d=w.onCourseChange)},t.$$.update=()=>{t.$$.dirty&4&&n(8,l=s.reduce((w,q)=>w+q.unread,0))},[i,a,s,o,f,r,d,v,l,m,h,_,T,P,u,c]}class Xn extends se{constructor(e){super(),ie(this,e,vn,Cn,le,{settings:0,strings:1,courses:2,labels:3,params:4,loading:5,onClick:14,onComposeClick:15,onCourseChange:6})}}const Me={};async function Zn(t){return Me[t]==null&&(Me[t]=await new Promise(e=>{window.require([t],e)})),Me[t]}export{Mn as $,wt as A,Ct as B,kt as C,W as D,me as E,z as F,St as G,O as H,An as I,Dn as J,de as K,J as L,Q as M,V as N,H as O,G as P,D as Q,Kn as R,se as S,Yn as T,fe as U,Ge as V,Be as W,Vt as X,Ln as Y,En as Z,ge as _,Re as a,Ve as a0,Ae as a1,Rn as a2,Te as a3,On as a4,Fn as a5,Zn as a6,Ot as a7,Sn as a8,Gn as a9,In as aa,zn as ab,Bn as ac,sn as ad,Kt as ae,Ut as af,qn as ag,Nn as ah,fn as ai,Wn as aj,Qn as ak,Yt as al,Xt as am,hn as an,Hn as ao,bn as ap,yn as aq,Vn as ar,Xn as as,Un as at,ie as b,Ie as c,Pe as d,le as e,F as f,j as g,Ee as h,De as i,A as j,g as k,je as l,ke as m,U as n,$ as o,L as p,Tn as q,Jn as r,Pn as s,X as t,_t as u,Y as v,N as w,jn as x,S as y,he as z};
//# sourceMappingURL=global-DO2AF1Rm.js.map
